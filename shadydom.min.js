/*
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
!function(){"use strict";function e(e){return Boolean("ShadyRoot"===e.__localName)}function t(e,t){return x.call(e,t)}function o(e,t,o){var i=Object.getOwnPropertyDescriptor(t,e);i&&Object.defineProperty(o,e,i)}function i(e,t){if(e&&t)for(var i,n=Object.getOwnPropertyNames(t),r=0;r<n.length&&(i=n[r]);r++)o(i,t,e);return e||t}function n(e){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];for(var n=0;n<t.length;n++)i(e,t[n]);return e}function r(e,t){for(var o in t)e[o]=t[o];return e}function s(e,t){var o=Object.getPrototypeOf(e);if(!o.hasOwnProperty("__patchProto")){var n=Object.create(o);n.__sourceProto=o,i(n,t),o.__patchProto=n}$(e,o.__patchProto)}function d(e,t,o){return{index:e,removed:t,addedCount:o}}function a(e,t){return H[t]||(H[t]=Object.getOwnPropertyDescriptor(HTMLElement.prototype,t)||Object.getOwnPropertyDescriptor(Element.prototype,t)||Object.getOwnPropertyDescriptor(Node.prototype,t)),H[t].get.call(e)}function l(e){V||(V=!0,L.then(h)),Z.push(e)}function h(){for(V=!1,ee++;Z.length;)Z.shift()();Y&&Y.flush&&Y.flush();var e=ee>te;if(Z.length&&!e&&h(),ee=0,e)throw new Error("Loop detected in ShadyDOM distribution, aborting.")}function _(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â ":return"&nbsp;"}}function u(e){return e.replace(oe,_)}function c(e){return e.replace(ie,_)}function p(e){for(var t={},o=0;o<e.length;o++)t[e[o]]=!0;return t}function f(e,t,o){switch(e.nodeType){case Node.ELEMENT_NODE:for(var i,n=e.localName,r="<"+n,s=e.attributes,d=0;i=s[d];d++)r+=" "+i.name+'="'+u(i.value)+'"';return r+=">",ne[n]?r:r+m(e,o)+"</"+n+">";case Node.TEXT_NODE:var a=e.data;return t&&re[t.localName]?a:c(a);case Node.COMMENT_NODE:return"<!--"+e.data+"-->";default:throw window.console.error(e),new Error("not implemented")}}function m(e,t){"template"===e.localName&&(e=e.content);for(var o,i="",n=t?t(e):e.childNodes,r=0,s=n.length;r<s&&(o=n[r]);r++)i+=f(o,e,t);return i}function g(e,t){var o=Ne(t);return e.map(function(e){var t=o===Ne(e.target);if(t&&e.addedNodes){var i=Array.from(e.addedNodes).filter(function(e){return o===Ne(e)});if(i.length)return e=Object.create(e),Object.defineProperty(e,"addedNodes",{value:i,configurable:!0}),e}else if(t)return e}).filter(function(e){return e})}function v(e){D.inUse&&!b(e)&&Pe.canPatchNode(e)&&(G.saveChildNodes(e),Pe.patch(e))}function N(e){Pe.unpatch(e)}function b(e){return Boolean(e.__patched)}function C(e,t){for(var o=[],i=e,n=e===window?window:e.getRootNode();i;)o.push(i),i=i.assignedSlot?i.assignedSlot:i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&i.host&&(t||i!==n)?i.host:i.parentNode;return o[o.length-1]===document&&o.push(window),o}function E(t,o){if(!e)return t;for(var i,n,r,s,d=C(t,!0),a=o,l=0;l<a.length;l++)if(i=a[l],r=i===window?window:i.getRootNode(),r!==n&&(s=d.indexOf(r),n=r),!e(r)||s>-1)return i}function y(e){var t=function(t,o){var i=new e(t,o);return i.__composed=o&&Boolean(o.composed),i};return r(t,e),t.prototype=e.prototype,t}function S(e,t,o){var i=t.__handlers&&t.__handlers[e.type]&&t.__handlers[e.type][o];if(i)for(var n,r=0;n=i[r];r++)if(n.call(t,e),e.__immediatePropagationStopped)return}function P(e){var t,o=e.composedPath();Object.defineProperty(e,"currentTarget",{get:function(){return t},configurable:!0});for(var i=o.length-1;i>=0;i--)if(t=o[i],S(e,t,"capture"),e.__propagationStopped)return;Object.defineProperty(e,"eventPhase",{value:Event.AT_TARGET});for(var n,r=0;r<o.length;r++)if(t=o[r],(0===r||t.shadowRoot&&t.shadowRoot===n)&&(S(e,t,"bubble"),t!==window&&(n=t.getRootNode()),e.__propagationStopped))return}function O(e,t,o){var i=this;if(t){var n,r,d;if("object"==typeof o?(n=Boolean(o.capture),r=Boolean(o.once),d=Boolean(o.passive)):(n=Boolean(o),r=!1,d=!1),t.__eventWrappers){for(var a=0;a<t.__eventWrappers.length;a++)if(t.__eventWrappers[a].node===i&&t.__eventWrappers[a].type===e&&t.__eventWrappers[a].capture===n&&t.__eventWrappers[a].once===r&&t.__eventWrappers[a].passive===d)return}else t.__eventWrappers=[];var l=function(i){if(r&&this.removeEventListener(e,t,o),i.__target||(i.__target=i.target,i.__relatedTarget=i.relatedTarget,s(i,De)),i.composed||i.composedPath().indexOf(this)>-1)return i.eventPhase===Event.BUBBLING_PHASE&&i.target===i.relatedTarget?void i.stopImmediatePropagation():t(i)};t.__eventWrappers.push({node:this,type:e,capture:n,once:r,passive:d,wrapperFn:l}),Le[e]?(this.__handlers=this.__handlers||{},this.__handlers[e]=this.__handlers[e]||{capture:[],bubble:[]},this.__handlers[e][n?"capture":"bubble"].push(l)):Oe.call(this,e,l,o)}}function w(e,t,o){var i=this;if(t){var n,r,s;"object"==typeof o?(n=Boolean(o.capture),r=Boolean(o.once),s=Boolean(o.passive)):(n=Boolean(o),r=!1,s=!1);var d=void 0;if(t.__eventWrappers)for(var a=0;a<t.__eventWrappers.length;a++)if(t.__eventWrappers[a].node===i&&t.__eventWrappers[a].type===e&&t.__eventWrappers[a].capture===n&&t.__eventWrappers[a].once===r&&t.__eventWrappers[a].passive===s){d=t.__eventWrappers.splice(a,1)[0].wrapperFn,t.__eventWrappers.length||(t.__eventWrappers=void 0);break}if(we.call(this,e,d||t,o),d&&Le[e]&&this.__handlers&&this.__handlers[e]){var l=this.__handlers[e][n?"capture":"bubble"],h=l.indexOf(d);h>-1&&l.splice(h,1)}}}function T(){for(var e in Le)window.addEventListener(e,function(e){e.__target||(e.__target=e.target,e.__relatedTarget=e.relatedTarget,s(e,De),P(e),e.stopImmediatePropagation())},!0)}var D=window.ShadyDOM||{};D.hasNativeShadowDOM=Boolean(Element.prototype.attachShadow&&Node.prototype.getRootNode),D.inUse=D.force||!D.hasNativeShadowDOM;var L,R=Element.prototype,x=R.matches||R.matchesSelector||R.mozMatchesSelector||R.msMatchesSelector||R.oMatchesSelector||R.webkitMatchesSelector,$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M={};L=window.Promise?Promise.resolve():{then:function(e){var t=document.createTextNode(""),o=new MutationObserver(function(){o.disconnect(),e()});o.observe(t,{characterData:!0})}};var A=0,F=1,I=2,j=3,B={calcEditDistances:function(e,t,o,i,n,r){for(var s=this,d=r-n+1,a=o-t+1,l=new Array(d),h=0;h<d;h++)l[h]=new Array(a),l[h][0]=h;for(var _=0;_<a;_++)l[0][_]=_;for(var u=1;u<d;u++)for(var c=1;c<a;c++)if(s.equals(e[t+c-1],i[n+u-1]))l[u][c]=l[u-1][c-1];else{var p=l[u-1][c]+1,f=l[u][c-1]+1;l[u][c]=p<f?p:f}return l},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,o=e[0].length-1,i=e[t][o],n=[];t>0||o>0;)if(0!=t)if(0!=o){var r,s=e[t-1][o-1],d=e[t-1][o],a=e[t][o-1];r=d<a?d<s?d:s:a<s?a:s,r==s?(s==i?n.push(A):(n.push(F),i=s),t--,o--):r==d?(n.push(j),t--,i=d):(n.push(I),o--,i=a)}else n.push(j),t--;else n.push(I),o--;return n.reverse(),n},calcSplices:function(e,t,o,i,n,r){var s,a=0,l=0,h=Math.min(o-t,r-n);if(0==t&&0==n&&(a=this.sharedPrefix(e,i,h)),o==e.length&&r==i.length&&(l=this.sharedSuffix(e,i,h-a)),t+=a,n+=a,o-=l,r-=l,o-t==0&&r-n==0)return[];if(t==o){for(s=d(t,[],0);n<r;)s.removed.push(i[n++]);return[s]}if(n==r)return[d(t,[],o-t)];var _=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,o,i,n,r));s=void 0;for(var u=[],c=t,p=n,f=0;f<_.length;f++)switch(_[f]){case A:s&&(u.push(s),s=void 0),c++,p++;break;case F:s||(s=d(c,[],0)),s.addedCount++,c++,s.removed.push(i[p]),p++;break;case I:s||(s=d(c,[],0)),s.addedCount++,c++;break;case j:s||(s=d(c,[],0)),s.removed.push(i[p]),p++}return s&&u.push(s),u},sharedPrefix:function(e,t,o){for(var i=this,n=0;n<o;n++)if(!i.equals(e[n],t[n]))return n;return o},sharedSuffix:function(e,t,o){for(var i=e.length,n=t.length,r=0;r<o&&this.equals(e[--i],t[--n]);)r++;return r},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},k=function(e,t){return B.calculateSplices(e,t)},U=Element.prototype.insertBefore,q=Element.prototype.appendChild,W=Element.prototype.removeChild,G={arrayCopyChildNodes:function(e){for(var t=[],o=0,i=e.firstChild;i;i=i.nextSibling)t[o++]=i;return t},arrayCopyChildren:function(e){for(var t=[],o=0,i=e.firstElementChild;i;i=i.nextElementSibling)t[o++]=i;return t},arrayCopy:function(e){for(var t=e.length,o=new Array(t),i=0;i<t;i++)o[i]=e[i];return o},saveChildNodes:function(e){G.Logical.saveChildNodes(e),G.Composed.hasParentNode(e)||G.Composed.saveComposedData(e),G.Composed.saveChildNodes(e)}};G.Logical={hasParentNode:function(e){return Boolean(e.__dom&&e.__dom.parentNode)},hasChildNodes:function(e){return Boolean(e.__dom&&void 0!==e.__dom.childNodes)},getChildNodes:function(e){return this.hasChildNodes(e)?this._getChildNodes(e):G.Composed.getChildNodes(e)},_getChildNodes:function(e){if(!e.__dom.childNodes){e.__dom.childNodes=[];for(var t=this.getFirstChild(e);t;t=this.getNextSibling(t))e.__dom.childNodes.push(t)}return e.__dom.childNodes},getParentNode:function(e){return e.__dom&&void 0!==e.__dom.parentNode?e.__dom.parentNode:G.Composed.getParentNode(e)},getFirstChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?e.__dom.firstChild:G.Composed.getFirstChild(e)},getLastChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?e.__dom.lastChild:G.Composed.getLastChild(e)},getNextSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?e.__dom.nextSibling:G.Composed.getNextSibling(e)},getPreviousSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?e.__dom.previousSibling:G.Composed.getPreviousSibling(e)},getFirstElementChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?this._getFirstElementChild(e):G.Composed.getFirstElementChild(e)},_getFirstElementChild:function(e){for(var t=e.__dom.firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getLastElementChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?this._getLastElementChild(e):G.Composed.getLastElementChild(e)},_getLastElementChild:function(e){for(var t=e.__dom.lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},getNextElementSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?this._getNextElementSibling(e):G.Composed.getNextElementSibling(e)},_getNextElementSibling:function(e){for(var t=this,o=e.__dom.nextSibling;o&&o.nodeType!==Node.ELEMENT_NODE;)o=t.getNextSibling(o);return o},getPreviousElementSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?this._getPreviousElementSibling(e):G.Composed.getPreviousElementSibling(e)},_getPreviousElementSibling:function(e){for(var t=this,o=e.__dom.previousSibling;o&&o.nodeType!==Node.ELEMENT_NODE;)o=t.getPreviousSibling(o);return o},saveChildNodes:function(e){if(!this.hasChildNodes(e)){e.__dom=e.__dom||{},e.__dom.firstChild=e.firstChild,e.__dom.lastChild=e.lastChild;for(var t,o=e.__dom.childNodes=G.arrayCopyChildNodes(e),i=0;i<o.length&&(t=o[i]);i++)t.__dom=t.__dom||{},t.__dom.parentNode=e,t.__dom.nextSibling=o[i+1]||null,t.__dom.previousSibling=o[i-1]||null,M.patchNode(t)}},recordInsertBefore:function(e,t,o){var i=this;if(t.__dom.childNodes=null,e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var n=G.arrayCopyChildNodes(e),r=0;r<n.length;r++)i._linkNode(n[r],t,o);e.__dom=e.__dom||{},e.__dom.firstChild=e.__dom.lastChild=null,e.__dom.childNodes=null}else this._linkNode(e,t,o)},_linkNode:function(e,t,o){M.patchNode(e),o=o||null,e.__dom=e.__dom||{},t.__dom=t.__dom||{},o&&(o.__dom=o.__dom||{}),e.__dom.previousSibling=o?o.__dom.previousSibling:t.__dom.lastChild,e.__dom.previousSibling&&(e.__dom.previousSibling.__dom.nextSibling=e),e.__dom.nextSibling=o,e.__dom.nextSibling&&(e.__dom.nextSibling.__dom.previousSibling=e),e.__dom.parentNode=t,o?o===t.__dom.firstChild&&(t.__dom.firstChild=e):(t.__dom.lastChild=e,t.__dom.firstChild||(t.__dom.firstChild=e)),t.__dom.childNodes=null},recordRemoveChild:function(e,t){e.__dom=e.__dom||{},t.__dom=t.__dom||{},e===t.__dom.firstChild&&(t.__dom.firstChild=e.__dom.nextSibling),e===t.__dom.lastChild&&(t.__dom.lastChild=e.__dom.previousSibling);var o=e.__dom.previousSibling,i=e.__dom.nextSibling;o&&(o.__dom=o.__dom||{},o.__dom.nextSibling=i),i&&(i.__dom=i.__dom||{},i.__dom.previousSibling=o),e.__dom.parentNode=e.__dom.previousSibling=e.__dom.nextSibling=null,t.__dom.childNodes=null}},G.Composed={hasParentNode:function(e){return Boolean(e.__dom&&void 0!==e.__dom.$parentNode)},hasChildNodes:function(e){return Boolean(e.__dom&&void 0!==e.__dom.$childNodes)},getChildNodes:function(e){return this.hasChildNodes(e)?this._getChildNodes(e):!e.__patched&&G.arrayCopy(e.childNodes)},_getChildNodes:function(e){if(!e.__dom.$childNodes){e.__dom.$childNodes=[];for(var t=e.__dom.$firstChild;t;t=t.__dom.$nextSibling)e.__dom.$childNodes.push(t)}return e.__dom.$childNodes},getComposedChildNodes:function(e){return e.__dom.$childNodes},getParentNode:function(e){return this.hasParentNode(e)?e.__dom.$parentNode:!e.__patched&&e.parentNode},getFirstChild:function(e){return e.__patched?e.__dom.$firstChild:e.firstChild},getLastChild:function(e){return e.__patched?e.__dom.$lastChild:e.lastChild},getNextSibling:function(e){return e.__patched?e.__dom.$nextSibling:e.nextSibling},getPreviousSibling:function(e){return e.__patched?e.__dom.$previousSibling:e.previousSibling},getFirstElementChild:function(e){return e.__patched?this._getFirstElementChild(e):e.firstElementChild},_getFirstElementChild:function(e){for(var t=e.__dom.$firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.$nextSibling;return t},getLastElementChild:function(e){return e.__patched?this._getLastElementChild(e):e.lastElementChild},_getLastElementChild:function(e){for(var t=e.__dom.$lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.$previousSibling;return t},getNextElementSibling:function(e){return e.__patched?this._getNextElementSibling(e):e.nextElementSibling},_getNextElementSibling:function(e){for(var t=this,o=e.__dom.$nextSibling;o&&o.nodeType!==Node.ELEMENT_NODE;)o=t.getNextSibling(o);return o},getPreviousElementSibling:function(e){return e.__patched?this._getPreviousElementSibling(e):e.previousElementSibling},_getPreviousElementSibling:function(e){for(var t=this,o=e.__dom.$previousSibling;o&&o.nodeType!==Node.ELEMENT_NODE;)o=t.getPreviousSibling(o);return o},saveChildNodes:function(e){var t=this;if(!this.hasChildNodes(e)){e.__dom=e.__dom||{},e.__dom.$firstChild=e.firstChild,e.__dom.$lastChild=e.lastChild;for(var o,i=e.__dom.$childNodes=G.arrayCopyChildNodes(e),n=0;n<i.length&&(o=i[n]);n++)t.saveComposedData(o)}},saveComposedData:function(e){e.__dom=e.__dom||{},void 0===e.__dom.$parentNode&&(e.__dom.$parentNode=e.parentNode),void 0===e.__dom.$nextSibling&&(e.__dom.$nextSibling=e.nextSibling),void 0===e.__dom.$previousSibling&&(e.__dom.$previousSibling=e.previousSibling)},recordInsertBefore:function(e,t,o){var i=this;if(t.__dom.$childNodes=null,e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var n=this.getFirstChild(e);n;n=this.getNextSibling(n))i._linkNode(n,t,o);else this._linkNode(e,t,o)},_linkNode:function(e,t,o){e.__dom=e.__dom||{},t.__dom=t.__dom||{},o&&(o.__dom=o.__dom||{}),e.__dom.$previousSibling=o?o.__dom.$previousSibling:t.__dom.$lastChild,e.__dom.$previousSibling&&(e.__dom.$previousSibling.__dom.$nextSibling=e),e.__dom.$nextSibling=o,e.__dom.$nextSibling&&(e.__dom.$nextSibling.__dom.$previousSibling=e),e.__dom.$parentNode=t,o?o===t.__dom.$firstChild&&(t.__dom.$firstChild=e):(t.__dom.$lastChild=e,t.__dom.$firstChild||(t.__dom.$firstChild=e)),t.__dom.$childNodes=null},recordRemoveChild:function(e,t){e.__dom=e.__dom||{},t.__dom=t.__dom||{},e===t.__dom.$firstChild&&(t.__dom.$firstChild=e.__dom.$nextSibling),e===t.__dom.$lastChild&&(t.__dom.$lastChild=e.__dom.$previousSibling);var o=e.__dom.$previousSibling,i=e.__dom.$nextSibling;o&&(o.__dom=o.__dom||{},o.__dom.$nextSibling=i),i&&(i.__dom=i.__dom||{},i.__dom.$previousSibling=o),e.__dom.$parentNode=e.__dom.$previousSibling=e.__dom.$nextSibling=null,t.__dom.$childNodes=null},clearChildNodes:function(e){for(var t,o=this,i=this.getChildNodes(e),n=0;n<i.length;n++)t=i[n],o.recordRemoveChild(t,e),W.call(e,t)},saveParentNode:function(e){e.__dom=e.__dom||{},e.__dom.$parentNode=e.parentNode},insertBefore:function(e,t,o){return this.saveChildNodes(e),this._addChild(e,t,o),U.call(e,t,o||null)},appendChild:function(e,t){return this.saveChildNodes(e),this._addChild(e,t),q.call(e,t)},removeChild:function(e,t){var o=this.getParentNode(t);if(this.saveChildNodes(e),this._removeChild(e,t),o===e)return W.call(e,t)},_addChild:function(e,t,o){var i=this,n=t.nodeType===Node.DOCUMENT_FRAGMENT_NODE,r=this.getParentNode(t);if(r&&this._removeChild(r,t),n)for(var s=this.getChildNodes(t),d=0;d<s.length;d++){var a=s[d];i._removeChild(t,a),i.recordInsertBefore(a,e,o)}else this.recordInsertBefore(t,e,o)},_removeChild:function(e,t){this.recordRemoveChild(t,e)}};var H={},z="function"==typeof Event?Event:function(e,t){t=t||{};var o=document.createEvent("Event");return o.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),o},X=function(){function e(e){this.root=e,this.insertionPointTag="slot"}return e.prototype.getInsertionPoints=function(){return this.root.querySelectorAll(this.insertionPointTag)},e.prototype.hasInsertionPoint=function(){return Boolean(this.root._insertionPoints&&this.root._insertionPoints.length)},e.prototype.isInsertionPoint=function(e){return e.localName&&e.localName==this.insertionPointTag},e.prototype.distribute=function(){return this.hasInsertionPoint()?this.distributePool(this.root,this.collectPool()):[]},e.prototype.collectPool=function(){return G.arrayCopy(G.Logical.getChildNodes(this.root.host))},e.prototype.distributePool=function(e,t){for(var o,i=this,n=[],r=this.root._insertionPoints,s=0,d=r.length;s<d&&(o=r[s]);s++){i.distributeInsertionPoint(o,t);var a=G.Logical.getParentNode(o);a&&a.shadyRoot&&i.hasInsertionPoint(a.shadyRoot)&&n.push(a.shadyRoot)}for(var l=0;l<t.length;l++){var h=t[l];if(h){h._assignedSlot=void 0;var _=G.Composed.getParentNode(h);_&&G.Composed.removeChild(_,h)}}return n},e.prototype.distributeInsertionPoint=function(e,t){var o=this,i=e._assignedNodes;i&&this.clearAssignedSlots(e,!0),e._assignedNodes=[];for(var n,r=!1,s=!1,d=0,a=t.length;d<a;d++)n=t[d],n&&o.matchesInsertionPoint(n,e)&&(n.__prevAssignedSlot!=e&&(r=!0),o.distributeNodeInto(n,e),t[d]=void 0,s=!0);if(!s)for(var l,h=G.Logical.getChildNodes(e),_=0;_<h.length;_++)l=h[_],l.__prevAssignedSlot!=e&&(r=!0),o.distributeNodeInto(l,e);if(i){for(var u=0;u<i.length;u++)i[u].__prevAssignedSlot=null;e._assignedNodes.length<i.length&&(r=!0)}this.setDistributedNodesOnInsertionPoint(e),r&&this._fireSlotChange(e)},e.prototype.clearAssignedSlots=function(e,t){var o=e._assignedNodes;if(o)for(var i=0;i<o.length;i++){var n=o[i];t&&(n.__prevAssignedSlot=n._assignedSlot),n._assignedSlot===e&&(n._assignedSlot=null)}},e.prototype.matchesInsertionPoint=function(e,t){var o=t.getAttribute("name");o=o?o.trim():"";var i=e.getAttribute&&e.getAttribute("slot");return i=i?i.trim():"",i==o},e.prototype.distributeNodeInto=function(e,t){t._assignedNodes.push(e),e._assignedSlot=t},e.prototype.setDistributedNodesOnInsertionPoint=function(e){var t=this,o=e._assignedNodes;e._distributedNodes=[];for(var i,n=0;n<o.length&&(i=o[n]);n++)if(t.isInsertionPoint(i)){var r=i._distributedNodes;if(r)for(var s=0;s<r.length;s++)e._distributedNodes.push(r[s])}else e._distributedNodes.push(o[n])},e.prototype._fireSlotChange=function(e){e.dispatchEvent(new z("slotchange")),e._assignedSlot&&this._fireSlotChange(e._assignedSlot)},e.prototype.isFinalDestination=function(e){return!e._assignedSlot},e}(),J=function(e){if(!e)throw"Must provide a host";var t=document.createDocumentFragment();return t.__proto__=Q,t._init(e),t},K={_init:function(e){this.__localName="ShadyRoot",e.shadyRoot=this,this.host=e,G.Logical.saveChildNodes(e),G.Logical.saveChildNodes(this),this._clean=!0,this._hasRendered=!1,this._distributor=new X(this),this.update()},update:function(){var e=this._findDistributionRoot(this.host);e._clean&&(e._clean=!1,l(function(){e.render()}))},_findDistributionRoot:function(e){for(var t=e.shadyRoot;e&&this._elementNeedsDistribution(e);)t=e.getRootNode(),e=t&&t.host;return t},_elementNeedsDistribution:function(e){for(var t,o=this,i=G.Logical.getChildNodes(e),n=0;n<i.length;n++)if(t=i[n],o._distributor.isInsertionPoint(t))return e.getRootNode()},render:function(){this._clean||(this._clean=!0,this._skipUpdateInsertionPoints?this._hasRendered||(this._insertionPoints=[]):this.updateInsertionPoints(),this._skipUpdateInsertionPoints=!1,this.distribute(),this.compose(),this._hasRendered=!0)},forceRender:function(){this._clean=!1,this.render()},distribute:function(){for(var e=this._distributor.distribute(),t=0;t<e.length;t++)e[t].forceRender()},updateInsertionPoints:function(){var e=this,t=this.__insertionPoints;if(t)for(var o,i=0;i<t.length;i++)o=t[i],o.getRootNode()!==e&&e._distributor.clearAssignedSlots(o);t=this._insertionPoints=this._distributor.getInsertionPoints();for(var n,r=0;r<t.length;r++)n=t[r],G.Logical.saveChildNodes(n),G.Logical.saveChildNodes(G.Logical.getParentNode(n))},get _insertionPoints(){return this.__insertionPoints||this.updateInsertionPoints(),this.__insertionPoints||(this.__insertionPoints=[])},set _insertionPoints(e){this.__insertionPoints=e},hasInsertionPoint:function(){return this._distributor.hasInsertionPoint()},compose:function(){this._composeTree()},_composeTree:function(){var e=this;this._updateChildNodes(this.host,this._composeNode(this.host));for(var t,o,i=this._insertionPoints||[],n=0,r=i.length;n<r&&(t=i[n]);n++)o=G.Logical.getParentNode(t),o!==e.host&&o!==e&&e._updateChildNodes(o,e._composeNode(o))},_composeNode:function(e){for(var t=this,o=[],i=G.Logical.getChildNodes(e.shadyRoot||e),n=0;n<i.length;n++){var r=i[n];if(t._distributor.isInsertionPoint(r))for(var s=r._distributedNodes||(r._distributedNodes=[]),d=0;d<s.length;d++){var a=s[d];t.isFinalDestination(r,a)&&o.push(a)}else o.push(r)}return o},isFinalDestination:function(e,t){return this._distributor.isFinalDestination(e,t)},_updateChildNodes:function(e,t){for(var o,i=G.Composed.getChildNodes(e),n=k(t,i),r=0,s=0;r<n.length&&(o=n[r]);r++){for(var d,a=0;a<o.removed.length&&(d=o.removed[a]);a++)G.Composed.getParentNode(d)===e&&G.Composed.removeChild(e,d),i.splice(o.index+s,1);s-=o.addedCount}for(var l,h,_=0;_<n.length&&(l=n[_]);_++){h=i[l.index];for(var u,c=l.index;c<l.index+l.addedCount;c++)u=t[c],G.Composed.insertBefore(e,u,h),i.splice(c,0,u)}},getInsertionPointTag:function(){return this._distributor.insertionPointTag}},Q=Object.create(DocumentFragment.prototype);i(Q,K);var V,Y=window.customElements,Z=[],ee=0,te=100;h.list=Z;var oe=/[&\u00A0"]/g,ie=/[&\u00A0<>]/g,ne=p(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),re=p(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),se={addNode:function(e,t,o){var i=this.ownerShadyRootForNode(e);if(i){t.__noInsertionPoint&&i._clean&&(i._skipUpdateInsertionPoints=!0);var n=this._maybeAddInsertionPoint(t,e,i);n&&(i._skipUpdateInsertionPoints=!1)}G.Logical.hasChildNodes(e)&&G.Logical.recordInsertBefore(t,e,o);var r=this._maybeDistribute(t,e,i)||e.shadyRoot;return r},removeNode:function(e){var t,o=G.Logical.hasParentNode(e)&&G.Logical.getParentNode(e),i=this.ownerShadyRootForNode(e);return o&&(t=this.maybeDistributeParent(e),G.Logical.recordRemoveChild(e,o),i&&(this._removeDistributedChildren(i,e)||o.localName===i.getInsertionPointTag())&&(i._skipUpdateInsertionPoints=!1,i.update())),this._removeOwnerShadyRoot(e),t},_scheduleObserver:function(e,t,o){var i=e.__dom&&e.__dom.observer;i&&(t&&i.addedNodes.push(t),o&&i.removedNodes.push(o),i.schedule())},removeNodeFromParent:function(e,t){t?(this._scheduleObserver(t,null,e),this.removeNode(e)):this._removeOwnerShadyRoot(e)},_hasCachedOwnerRoot:function(e){return Boolean(void 0!==e.__ownerShadyRoot)},getRootNode:function(t){if(t&&t.nodeType){var o=t.__ownerShadyRoot;if(void 0===o){if(e(t))o=t;else{var i=G.Logical.getParentNode(t);o=i?this.getRootNode(i):t}document.documentElement.contains(t)&&(t.__ownerShadyRoot=o)}return o}},ownerShadyRootForNode:function(t){var o=this.getRootNode(t);if(e(o))return o},_maybeDistribute:function(e,t,o){var i=o&&o.getInsertionPointTag()||"",n=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!e.__noInsertionPoint&&i&&e.querySelector(i),r=n&&G.Logical.getParentNode(n).nodeType!==Node.DOCUMENT_FRAGMENT_NODE,s=n||e.localName===i;(s||t.localName===i)&&o&&o.update();var d=this._nodeNeedsDistribution(t);return d&&t.shadyRoot.update(),d||s&&!r},_maybeAddInsertionPoint:function(e,t,o){var i,n=this,r=o.getInsertionPointTag();if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||e.__noInsertionPoint)e.localName===r&&(G.Logical.saveChildNodes(t),G.Logical.saveChildNodes(e),i=!0);else for(var s,d,a,l=e.querySelectorAll(r),h=0;h<l.length&&(s=l[h]);h++)d=G.Logical.getParentNode(s),d===e&&(d=t),a=n._maybeAddInsertionPoint(s,d,o),i=i||a;return i},_nodeNeedsDistribution:function(e){return e&&e.shadyRoot&&e.shadyRoot.hasInsertionPoint()},_removeDistributedChildren:function(e,t){for(var o,i=this,n=e._insertionPoints,r=0;r<n.length;r++){var s=n[r];if(i._contains(t,s))for(var d=s.assignedNodes({flatten:!0}),a=0;a<d.length;a++){o=!0;var l=d[a],h=G.Composed.getParentNode(l);h&&G.Composed.removeChild(h,l)}}return o},_contains:function(e,t){for(;t;){if(t==e)return!0;t=G.Logical.getParentNode(t)}},_removeOwnerShadyRoot:function(e){var t=this;if(this._hasCachedOwnerRoot(e))for(var o,i=G.Logical.getChildNodes(e),n=0,r=i.length;n<r&&(o=i[n]);n++)t._removeOwnerShadyRoot(o);e.__ownerShadyRoot=void 0},firstComposedNode:function(e){for(var t,o=e.assignedNodes({flatten:!0}),i=this.getRootNode(e),n=0,r=o.length;n<r&&(t=o[n]);n++)if(i.isFinalDestination(e,t))return t},clearNode:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},maybeDistributeParent:function(e){var t=G.Logical.getParentNode(e);if(this._nodeNeedsDistribution(t))return t.shadyRoot.update(),!0},maybeDistributeAttributeChange:function(e,t){if("slot"===t)this.maybeDistributeParent(e);else if("slot"===e.localName&&"name"===t){var o=this.ownerShadyRootForNode(e);o&&o.update()}},query:function(e,t,o){var i=[];return this._queryElements(G.Logical.getChildNodes(e),t,o,i),i},_queryElements:function(e,t,o,i){for(var n,r=this,s=0,d=e.length;s<d&&(n=e[s]);s++)if(n.nodeType===Node.ELEMENT_NODE&&r._queryElement(n,t,o,i))return!0},_queryElement:function(e,t,o,i){var n=t(e);return n&&i.push(e),o&&o(n)?n:void this._queryElements(G.Logical.getChildNodes(e),t,o,i)},activeElementForNode:function(t){var o=this,i=document.activeElement;if(!i)return null;var n=!!e(t);if(t!==document){if(!n)return null;if(t.host===i||!t.host.contains(i))return null}for(var r=this.ownerShadyRootForNode(i);r&&r!==t;)i=r.host,r=o.ownerShadyRootForNode(i);return t===document?r?null:i:r===t?i:null}},de=Element.prototype.cloneNode,ae=Document.prototype.importNode,le=Element.prototype.setAttribute,he=Element.prototype.removeAttribute,_e=function(e,t){window.ShadyCSS&&"class"===e&&this.ownerDocument===document?window.ShadyCSS.setElementClass(this,t):le.call(this,e,t)},ue={};Object.defineProperties(ue,{parentElement:{get:function(){return G.Logical.getParentNode(this)},configurable:!0},parentNode:{get:function(){return G.Logical.getParentNode(this)},configurable:!0},nextSibling:{get:function(){return G.Logical.getNextSibling(this)},configurable:!0},previousSibling:{get:function(){return G.Logical.getPreviousSibling(this)},configurable:!0},nextElementSibling:{get:function(){return G.Logical.getNextElementSibling(this)},configurable:!0},previousElementSibling:{get:function(){return G.Logical.getPreviousElementSibling(this)},configurable:!0},assignedSlot:{get:function(){return this._assignedSlot},configurable:!0}});var ce={appendChild:function(e){return this.insertBefore(e)},insertBefore:function(t,o){if(o&&G.Logical.getParentNode(o)!==this)throw Error("The ref_node to be inserted before is not a child of this node");if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var i=G.Logical.getParentNode(t);se.removeNodeFromParent(t,i)}if(!se.addNode(this,t,o)){if(o){var n=se.ownerShadyRootForNode(o);n&&(o=o.localName===n.getInsertionPointTag()?se.firstComposedNode(o):o)}var r=e(this)?this.host:this;o?G.Composed.insertBefore(r,t,o):G.Composed.appendChild(r,t)}return se._scheduleObserver(this,t),t},removeChild:function(t){if(G.Logical.getParentNode(t)!==this)throw Error("The node to be removed is not a child of this node: "+t);if(!se.removeNode(t)){var o=e(this)?this.host:this,i=G.Composed.getParentNode(t);o===i&&G.Composed.removeChild(o,t)}return se._scheduleObserver(this,null,t),t},replaceChild:function(e,t){return this.insertBefore(e,t),this.removeChild(t),e},querySelector:function(e){var o=se.query(this,function(o){return t(o,e)},function(e){return Boolean(e)})[0];return o||null},querySelectorAll:function(e){return se.query(this,function(o){return t(o,e)})},cloneNode:function(e){if("template"==this.localName)return de.call(this,e);var t=de.call(this,!1);if(e)for(var o,i=this.childNodes,n=0;n<i.length;n++)o=i[n].cloneNode(!0),t.appendChild(o);return t},importNode:function(e,t){var o=this instanceof Document?this:this.ownerDocument,i=ae.call(o,e,!1);if(t){var n=G.Logical.getChildNodes(e);M.patchNode(i);for(var r,s=0;s<n.length;s++)r=o.importNode(n[s],!0),i.appendChild(r)}return i}};Object.defineProperties(ce,{childNodes:{get:function(){var e=G.Logical.getChildNodes(this);return Array.isArray(e)?e:G.arrayCopyChildNodes(this)},configurable:!0},children:{get:function(){return G.Logical.hasChildNodes(this)?Array.prototype.filter.call(this.childNodes,function(e){return e.nodeType===Node.ELEMENT_NODE}):G.arrayCopyChildren(this)},configurable:!0},firstChild:{get:function(){return G.Logical.getFirstChild(this)},configurable:!0},lastChild:{get:function(){return G.Logical.getLastChild(this)},configurable:!0},firstElementChild:{get:function(){return G.Logical.getFirstElementChild(this)},configurable:!0},lastElementChild:{get:function(){return G.Logical.getLastElementChild(this)},configurable:!0},textContent:{get:function(){if(this.childNodes){for(var e,t=[],o=0,i=this.childNodes;e=i[o];o++)e.nodeType!==Node.COMMENT_NODE&&t.push(e.textContent);return t.join("")}return""},set:function(e){se.clearNode(this),e&&this.appendChild(document.createTextNode(e))},configurable:!0},innerHTML:{get:function(){return m(this)},set:function(e){var t=this;se.clearNode(this);var o=document.createElement("div");o.innerHTML=e;for(var i=G.arrayCopyChildNodes(o),n=0;n<i.length;n++)t.appendChild(i[n])},configurable:!0}});var pe={assignedNodes:function(e){return(e&&e.flatten?this._distributedNodes:this._assignedNodes)||[]},setAttribute:function(e,t){_e.call(this,e,t),se.maybeDistributeAttributeChange(this,e)},removeAttribute:function(e){he.call(this,e),se.maybeDistributeAttributeChange(this,e)}};Object.defineProperties(pe,{shadowRoot:{get:function(){return this.shadyRoot}},slot:{get:function(){return this.getAttribute("slot")},set:function(e){this.setAttribute("slot",e)}}});var fe={get:function(){return se.activeElementForNode(this)}},me={};Object.defineProperties(me,{activeElement:fe});var ge={};Object.defineProperties(ge,{_activeElement:fe});var ve={Node:n({__patched:"Node"},ue),Fragment:n({__patched:"Fragment"},ue,ce,me),Element:n({__patched:"Element"},ue,ce,pe,me),Document:n({__patched:"Document"},ue,ce,pe,ge)},Ne=function(e){return se.getRootNode(e)},be=function(){this._scheduled=!1,this.addedNodes=[],this.removedNodes=[],this.callbacks=new Set};be.prototype.schedule=function(){var e=this;this._scheduled||(this._scheduled=!0,L.then(function(){e.flush()}))},be.prototype.flush=function(){if(this._scheduled){this._scheduled=!1;var e=this.takeRecords();e.length&&this.callbacks.forEach(function(t){t(e)})}},be.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var e=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],e}return[]};var Ce=function(e,t){M.patchNode(e),e.__dom.observer||(e.__dom.observer=new be),e.__dom.observer.callbacks.add(t);var o=e.__dom.observer;return{_callback:t,_observer:o,_node:e,takeRecords:function(){return o.takeRecords();
}}},Ee=function(e){var t=e&&e._observer;t&&(t.callbacks.delete(e._callback),t.callbacks.size||(e._node.__dom.observer=null))},ye=0,Se=!1,Pe={canPatchNode:function(e){switch(e){case document.head:case document.documentElement:return!1;default:return!0}},hasPrototypeDescriptors:Boolean(Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent")),patch:function(e){ye++,Se&&window.console.warn("patch node",e),this.hasPrototypeDescriptors?s(e,this.mixinForObject(e)):(window.console.warn("Patching instance rather than prototype",e),i(e,this.mixinForObject(e)))},mixinForObject:function(e){switch(e.nodeType){case Node.ELEMENT_NODE:return ve.Element;case Node.DOCUMENT_FRAGMENT_NODE:return ve.Fragment;case Node.DOCUMENT_NODE:return ve.Document;case Node.TEXT_NODE:case Node.COMMENT_NODE:return ve.Node}},unpatch:function(e){e.__sourceProto&&(e.__proto__=e.__sourceProto)}};M.patchNode=v,M.isNodePatched=b;var Oe=Element.prototype.addEventListener,we=Element.prototype.removeEventListener,Te={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},De={__patched:"Event",get composed(){return this.isTrusted&&void 0===this.__composed&&(this.__composed=Te[this.type]),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=C(this.__target,this.composed)),this.__composedPath},get target(){return E(this.currentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=C(this.__relatedTarget,!0)),E(this.currentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.__propagationStopped=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.__immediatePropagationStopped=!0,this.__propagationStopped=!0}},Le={focus:!0,blur:!0},Re=y(Event),xe=y(CustomEvent),$e=y(MouseEvent);if(D.inUse){window.ShadyDOM={tree:G,getNativeProperty:a,patch:v,isPatched:b,unpatch:N,isShadyRoot:e,enqueue:l,flush:h,inUse:D.inUse,filterMutations:g,observeChildren:Ce,unobserveChildren:Ee};var Me=function(e){v(e);var t=new J(e);return v(t),t};Element.prototype.attachShadow=function(){return Me(this)},Node.prototype.addEventListener=O,Node.prototype.removeEventListener=w,Event=Re,CustomEvent=xe,MouseEvent=$e,T(),Object.defineProperty(Node.prototype,"isConnected",{get:function(){return document.documentElement.contains(this)},configurable:!0}),Node.prototype.getRootNode=function(e){return Ne(this,e)},Object.defineProperty(Element.prototype,"slot",{get:function(){return this.getAttribute("slot")},set:function(e){this.setAttribute("slot",e)},configurable:!0}),Object.defineProperty(Node.prototype,"assignedSlot",{get:function(){return this._assignedSlot||null},configurable:!0});var Ae=Element.prototype.setAttribute;Element.prototype.setAttribute=_e,Element.prototype.__nativeSetAttribute=Ae;var Fe={get:function(){return this.getAttribute("class")},set:function(e){this.setAttribute("class",e)},configurable:!0},Ie=Object.getOwnPropertyDescriptor(Element.prototype,"className");if(Ie&&Ie.configurable)Object.defineProperty(Element.prototype,"className",Fe);else{var je=window.customElements&&window.customElements.nativeHTMLElement||HTMLElement;Ie=Object.getOwnPropertyDescriptor(je.prototype,"className"),Ie&&Ie.configurable&&Object.defineProperty(je.prototype,"className",Fe)}}}();
//# sourceMappingURL=shadydom.min.js.map
