{"version":3,"sources":["env.js"],"names":["isShadyRoot","obj","__localName","ownerShadyRootForNode","node","root","getRootNode","matchesSelector","element","selector","matches","call","copyOwnProperty","name","source","target","pd","Object","getOwnPropertyDescriptor","defineProperty","extend","n$","getOwnPropertyNames","n","i","length","extendAll","sources","mixin","patchPrototype","proto","getPrototypeOf","hasOwnProperty","patchProto","create","__sourceProto","__patchProto","__proto__","enqueue","callback","scheduled","promish","then","flush","flushList","push","flushCount","shift","customElements$1","isFlushedMaxed","Error","filterMutations","mutations","targetRootNode","map","mutation","mutationInScope","addedNodes","nodes","Array","from","filter","value","configurable","m","escapeReplace","c","escapeAttr","s","replace","escapeAttrRegExp","escapeData","escapeDataRegExp","makeSet","arr","set","getOuterHTML","parentNode","composed","nodeType","Node","ELEMENT_NODE","tagName","localName","attrs","attributes","attr","voidElements","getInnerHTML","TEXT_NODE","data","plaintextParents","COMMENT_NODE","window","console","error","content","c$","childNodes","child","l","nodeWalker","currentNode","firstChild","lastChild","nextSibling","firstElementChild","elementWalker","lastElementChild","previousElementSibling","previousSibling","nextElementSibling","children","innerHTML","textContent","nodeValue","textWalker","document","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","getProperty","prop","__shady","hasProperty","generateSimpleDescriptor","get","nativeTree","insertDOMFrom","appendChild","clearNode","removeChild","getDocumentActiveElement","nativeActiveElementDescriptor","settings","hasDescriptors","activeElement","activeElementForNode","active","isShadyRoot$$1","host","contains","activeRoot","patchAccessorGroup","descriptors","force","p","objDesc","warn","patchAccessors","OutsideAccessors","InsideAccessors","ActiveElementAccessor","recordInsertBefore","container","ref_node","patchInsideElementAccessors","DOCUMENT_FRAGMENT_NODE","linkNode","resetTo","patchOutsideElementAccessors","ps","ns","recordRemoveChild","addNode","ownerRoot","ipAdded","__noInsertionPoint","_changePending","_skipUpdateInsertionPoints","_maybeAddInsertionPoint","handled","_maybeDistribute","shadyRoot","removeNode","logicalParent","distributed","maybeDistributeParent","removedDistributed","_removeDistributedChildren","addedInsertionPoint","getInsertionPointTag","updateRootViaContentChange","_removeOwnerShadyRoot","_scheduleObserver","addedNode","removedNode","observer","removedNodes","schedule","removeNodeFromParent","parent","_hasCachedOwnerRoot","__ownerShadyRoot","documentElement","insertionPointTag","fragContent","querySelector","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","querySelectorAll","np","na","recordChildNodes","hasInsertionPoint","hostNeedsDist","ip$","_insertionPoints","insertionPoint","_contains","dc$","assignedNodes","flatten","j","firstComposedNode","isFinalDestination","update","distributeAttributeChange","query","matcher","halter","list","_queryElements","elements","_queryElement","result","renderRootNode","render","setAttribute$1","ShadyCSS","ownerDocument","setElementClass","setAttribute","removeAttribute$1","removeAttribute","insertBefore$1","insertBefore","removeChild$1","nativeParent","cloneNode$1","deep","cloneNode","nc","importNode$1","nativeImportNode","importNode","pathComposer","startNode","composedPath","current","startRoot","assignedSlot","retarget","refNode","path","refNodePath","p$","ancestor","lastRoot","rootIdx","indexOf","mixinComposedFlag","Base","klazz","type","options","event","__composed","prototype","fireHandlers","phase","hs","__handlers","fn","__immediatePropagationStopped","retargetNonBubblingEvent","e","__propagationStopped","Event","AT_TARGET","lastFiredRoot","shadowRoot","activateFocusEventOverrides","ev","nonBubblingEventsToRetarget","addEventListener","__target","__relatedTarget","relatedTarget","eventMixin","stopImmediatePropagation","patchEvents","PatchedEvent","CustomEvent","PatchedCustomEvent","MouseEvent","PatchedMouseEvent","newSplice","index","removed","addedCount","attachShadow","createDocumentFragment","ShadyRootPrototype","_init","getAssignedSlot","patchBuiltin","d","patchBuiltins","nodeMixin","Text","textMixin","DocumentFragment","fragmentMixin","Element","elementMixin","Document","documentMixin","previousImportNode","HTMLSlotElement","slotMixin","nativeHTMLElement","customElements","HTMLElement","ShadyDOM","hasNativeShadowDOM","desc","inUse","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","Promise","resolve","twiddle","createTextNode","cb","MutationObserver","disconnect","observe","characterData","AsyncObserver","_scheduled","callbacks","Set","takeRecords","forEach","observeChildren","add","_callback","_observer","_node","unobserveChildren","handle","delete","size","nativeAppendChild","nativeInsertBefore","nativeRemoveChild","nativeSetAttribute","nativeRemoveAttribute","nativeCloneNode","nativeAddEventListener","nativeRemoveEventListener","removeEventListener","nativeMethods","freeze","SHOW_ALL","SHOW_ELEMENT","parentElement","domParser","DOMParser","className","getAttribute","tc","cn","join","text","doc","parseFromString","head","body","ShadowRootAccessor","__outsideAccessors","__insideAccessors","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","isTrusted","__composedPath","currentTarget","__relatedTargetComposedPath","stopPropagation","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","min","reverse","calcSplices","prefixCount","suffixCount","splice","minLength","Math","sharedPrefix","sharedSuffix","ops","splices","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","NormalizedEvent","inType","params","createEvent","initEvent","bubbles","cancelable","Distributor","distributePool","collectPool","pool","dirtyRoots","distributeInsertionPoint","prevAssignedNodes","clearAssignedSlots","needsSlotChange","anyDistributed","matchesInsertionPoint","_prevAssignedSlot","distributeNodeInto","children$$1","setDistributedNodesOnInsertionPoint","_fireSlotChange","slot","savePrevious","slotName","trim","distributedNodes","isInsertionPoint","d$","dispatchEvent","_renderPending","_hasRendered","_distributor","_getRenderRoot","renderRoot","_rendererForHost","_render","updateInsertionPoints","distribute","compose","forceRender","i$","__insertionPoints","getInsertionPoints","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNode","next","optionsOrCapture","capture","once","passive","__eventWrappers","wrapperFn","eventPhase","BUBBLING_PHASE","bubble","idx","replaceChild","isConnected","defineProperties","_activeElement","patch"],"mappings":"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","file":"shadydom.min.js","sourcesContent":["(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet settings = window.ShadyDOM || {};\n\nsettings.hasNativeShadowDOM = Boolean(Element.prototype.attachShadow && Node.prototype.getRootNode);\n\nlet desc = Object.getOwnPropertyDescriptor(Node.prototype, 'firstChild');\n\nsettings.hasDescriptors = Boolean(desc && desc.configurable && desc.get);\nsettings.inUse = settings.force || !settings.hasNativeShadowDOM;\n\nfunction isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nfunction ownerShadyRootForNode(node) {\n  let root = node.getRootNode();\n  if (isShadyRoot(root)) {\n    return root;\n  }\n}\n\nlet p = Element.prototype;\nlet matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nfunction matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  let pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nfunction extend(target, source) {\n  if (target && source) {\n    let n$ = Object.getOwnPropertyNames(source);\n    for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nfunction extendAll(target, ...sources) {\n  for (let i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nfunction mixin(target, source) {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n}\n\nfunction patchPrototype(obj, mixin) {\n  let proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    let patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  // old browsers don't have setPrototypeOf\n  obj.__proto__ = proto.__patchProto;\n}\n\n// TODO(sorvell): actually rely on a real Promise polyfill...\nlet promish;\nif (window.Promise) {\n  promish = Promise.resolve();\n} else {\n  let twiddle = document.createTextNode('');\n  let content = 0;\n  promish = {\n    then(cb) {\n      // To preserve timing with Promise microtasks\n      // we create a new observer for every callback.\n      let observer = new MutationObserver(function() {\n        observer.disconnect();\n        cb();\n      });\n      observer.observe(twiddle, {characterData: true});\n      twiddle.textContent = content++;\n    }\n  };\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// render enqueuer/flusher\nlet customElements$1 = window.customElements;\nlet flushList = [];\nlet scheduled;\nlet flushCount = 0;\nlet flushMax = 100;\nfunction enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    promish.then(flush);\n  }\n  flushList.push(callback);\n}\n\nfunction flush() {\n  scheduled = false;\n  flushCount++;\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements$1 && customElements$1.flush) {\n    customElements$1.flush();\n  }\n  // continue flushing after elements are upgraded...\n  const isFlushedMaxed = (flushCount > flushMax);\n  if (flushList.length && !isFlushedMaxed) {\n      flush();\n  }\n  flushCount = 0;\n  if (isFlushedMaxed) {\n    throw new Error('Loop detected in ShadyDOM distribution, aborting.')\n  }\n}\n\nflush.list = flushList;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nclass AsyncObserver {\n\n  constructor() {\n    this._scheduled = false;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.callbacks = new Set();\n  }\n\n  schedule() {\n    if (!this._scheduled) {\n      this._scheduled = true;\n      promish.then(() => {\n        this.flush();\n      });\n    }\n  }\n\n  flush() {\n    if (this._scheduled) {\n      this._scheduled = false;\n      let mutations = this.takeRecords();\n      if (mutations.length) {\n        this.callbacks.forEach(function(cb) {\n          cb(mutations);\n        });\n      }\n    }\n  }\n\n  takeRecords() {\n    if (this.addedNodes.length || this.removedNodes.length) {\n      let mutations = [{\n        addedNodes: this.addedNodes,\n        removedNodes: this.removedNodes\n      }];\n      this.addedNodes = [];\n      this.removedNodes = [];\n      return mutations;\n    }\n    return [];\n  }\n\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nlet observeChildren = function(node, callback) {\n  node.__shady = node.__shady || {};\n  if (!node.__shady.observer) {\n    node.__shady.observer = new AsyncObserver();\n  }\n  node.__shady.observer.callbacks.add(callback);\n  let observer = node.__shady.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords() {\n      return observer.takeRecords()\n    }\n  };\n};\n\nlet unobserveChildren = function(handle) {\n  let observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      handle._node.__shady.observer = null;\n    }\n  }\n};\n\nfunction filterMutations(mutations, target) {\n  const targetRootNode = target.getRootNode();\n  return mutations.map(function(mutation) {\n    const mutationInScope = (targetRootNode === mutation.target.getRootNode());\n    if (mutationInScope && mutation.addedNodes) {\n      let nodes = Array.from(mutation.addedNodes).filter(function(n) {\n        return (targetRootNode === n.getRootNode());\n      });\n      if (nodes.length) {\n        mutation = Object.create(mutation);\n        Object.defineProperty(mutation, 'addedNodes', {\n          value: nodes,\n          configurable: true\n        });\n        return mutation;\n      }\n    } else if (mutationInScope) {\n      return mutation;\n    }\n  }).filter(function(m) { return m});\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet nativeAppendChild = Element.prototype.appendChild;\nlet appendChild = nativeAppendChild;\n\nlet nativeInsertBefore = Element.prototype.insertBefore;\nlet insertBefore = nativeInsertBefore;\n\nlet nativeRemoveChild = Element.prototype.removeChild;\nlet removeChild = nativeRemoveChild;\n\nlet nativeSetAttribute = Element.prototype.setAttribute;\nlet setAttribute = nativeSetAttribute;\n\nlet nativeRemoveAttribute = Element.prototype.removeAttribute;\nlet removeAttribute = nativeRemoveAttribute;\n\nlet nativeCloneNode = Element.prototype.cloneNode;\nlet cloneNode = nativeCloneNode;\n\nlet nativeImportNode = Document.prototype.importNode;\nlet importNode = nativeImportNode;\n\nlet nativeAddEventListener = Element.prototype.addEventListener;\nlet addEventListener = nativeAddEventListener;\n\nlet nativeRemoveEventListener = Element.prototype.removeEventListener;\nlet removeEventListener = nativeRemoveEventListener;\n\n\nvar nativeMethods = Object.freeze({\n\tappendChild: appendChild,\n\tinsertBefore: insertBefore,\n\tremoveChild: removeChild,\n\tsetAttribute: setAttribute,\n\tremoveAttribute: removeAttribute,\n\tcloneNode: cloneNode,\n\timportNode: importNode,\n\taddEventListener: addEventListener,\n\tremoveEventListener: removeEventListener\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nlet escapeAttrRegExp = /[&\\u00A0\"]/g;\nlet escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  let set = {};\n  for (let i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nlet voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nlet plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nfunction getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      let tagName = node.localName;\n      let s = '<' + tagName;\n      let attrs = node.attributes;\n      for (let i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      let data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nfunction getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  let s = '';\n  let c$ = composed ? composed(node) : node.childNodes;\n  for (let i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet nodeWalker = document.createTreeWalker(document, NodeFilter.SHOW_ALL,\n  null, false);\n\nlet elementWalker = document.createTreeWalker(document, NodeFilter.SHOW_ELEMENT,\n  null, false);\n\nfunction parentNode(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.parentNode();\n}\n\nfunction firstChild(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.firstChild();\n}\n\nfunction lastChild(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.lastChild();\n}\n\nfunction previousSibling(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.previousSibling();\n}\n\nfunction nextSibling(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.nextSibling();\n}\n\nfunction childNodes(node) {\n  let nodes = [];\n  nodeWalker.currentNode = node;\n  let n = nodeWalker.firstChild();\n  while (n) {\n    nodes.push(n);\n    n = nodeWalker.nextSibling();\n  }\n  return nodes;\n}\n\nfunction parentElement(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.parentNode();\n}\n\nfunction firstElementChild(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.firstChild();\n}\n\nfunction lastElementChild(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.lastChild();\n}\n\nfunction previousElementSibling(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.previousSibling();\n}\n\nfunction nextElementSibling(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.nextSibling();\n}\n\nfunction children(node) {\n  let nodes = [];\n  elementWalker.currentNode = node;\n  let n = elementWalker.firstChild();\n  while (n) {\n    nodes.push(n);\n    n = elementWalker.nextSibling();\n  }\n  return nodes;\n}\n\nfunction innerHTML(node) {\n  return getInnerHTML(node, (n) => childNodes(n));\n}\n\nfunction textContent(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    return node.nodeValue;\n  }\n  let textWalker = document.createTreeWalker(node, NodeFilter.SHOW_TEXT,\n    null, false);\n  let content = '', n;\n  while ( (n = textWalker.nextNode()) ) {\n    // TODO(sorvell): can't use textContent since we patch it on Node.prototype!\n    // However, should probably patch it only on element.\n    content += n.nodeValue;\n  }\n  return content;\n}\n\nvar nativeTree = Object.freeze({\n\tparentNode: parentNode,\n\tfirstChild: firstChild,\n\tlastChild: lastChild,\n\tpreviousSibling: previousSibling,\n\tnextSibling: nextSibling,\n\tchildNodes: childNodes,\n\tparentElement: parentElement,\n\tfirstElementChild: firstElementChild,\n\tlastElementChild: lastElementChild,\n\tpreviousElementSibling: previousElementSibling,\n\tnextElementSibling: nextElementSibling,\n\tchildren: children,\n\tinnerHTML: innerHTML,\n\ttextContent: textContent\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction getProperty(node, prop) {\n  return node.__shady && node.__shady[prop];\n}\n\nfunction hasProperty(node, prop) {\n  return getProperty(node, prop) !== undefined;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction generateSimpleDescriptor(prop) {\n  return {\n    get() {\n      let l = getProperty(this, prop);\n      return l !== undefined ? l : nativeTree[prop](this);\n    },\n    configurable: true\n  }\n}\n\nlet domParser = new DOMParser();\n\nfunction insertDOMFrom(target, from) {\n  let c$ = Array.from(from.childNodes);\n  for (let i=0; i < c$.length; i++) {\n    target.appendChild(c$[i]);\n  }\n}\n\nfunction clearNode(node) {\n  while (node.firstChild) {\n    node.removeChild(node.firstChild);\n  }\n}\n\nlet nativeActiveElementDescriptor = Object.getOwnPropertyDescriptor(\n  Document.prototype, 'activeElement');\nfunction getDocumentActiveElement() {\n  if (nativeActiveElementDescriptor && nativeActiveElementDescriptor.get) {\n    return nativeActiveElementDescriptor.get.call(document);\n  } else if (!settings.hasDescriptors) {\n    return document.activeElement;\n  }\n}\n\nfunction activeElementForNode(node) {\n  let active = getDocumentActiveElement();\n  if (!active) {\n    return null;\n  }\n  let isShadyRoot$$1 = !!(isShadyRoot(node));\n  if (node !== document) {\n    // If this node isn't a document or shady root, then it doesn't have\n    // an active element.\n    if (!isShadyRoot$$1) {\n      return null;\n    }\n    // If this shady root's host is the active element or the active\n    // element is not a descendant of the host (in the composed tree),\n    // then it doesn't have an active element.\n    if (node.host === active ||\n        !node.host.contains(active)) {\n      return null;\n    }\n  }\n  // This node is either the document or a shady root of which the active\n  // element is a (composed) descendant of its host; iterate upwards to\n  // find the active element's most shallow host within it.\n  let activeRoot = ownerShadyRootForNode(active);\n  while (activeRoot && activeRoot !== node) {\n    active = activeRoot.host;\n    activeRoot = ownerShadyRootForNode(active);\n  }\n  if (node === document) {\n    // This node is the document, so activeRoot should be null.\n    return activeRoot ? null : active;\n  } else {\n    // This node is a non-document shady root, and it should be\n    // activeRoot.\n    return activeRoot === node ? active : null;\n  }\n}\n\nlet OutsideAccessors = {\n  // node...\n  parentElement: generateSimpleDescriptor('parentElement'),\n\n  parentNode: generateSimpleDescriptor('parentNode'),\n\n  nextSibling: generateSimpleDescriptor('nextSibling'),\n\n  previousSibling: generateSimpleDescriptor('previousSibling'),\n\n  className: {\n    get() {\n      return this.getAttribute('class');\n    },\n    set(value) {\n      this.setAttribute('class', value);\n    },\n    configurable: true\n  },\n\n  // fragment, element, document\n  nextElementSibling: {\n    get() {\n      if (hasProperty(this, 'nextSibling')) {\n        let n = this.nextSibling;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.nextSibling;\n        }\n        return n;\n      } else {\n        return nextElementSibling(this);\n      }\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get() {\n      if (hasProperty(this, 'previousSibling')) {\n        let n = this.previousSibling;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.previousSibling;\n        }\n        return n;\n      } else {\n        return previousElementSibling(this);\n      }\n    },\n    configurable: true\n  }\n\n};\n\nlet InsideAccessors = {\n\n  childNodes: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        if (!this.__shady.childNodes) {\n          this.__shady.childNodes = [];\n          for (let n=this.firstChild; n; n=n.nextSibling) {\n            this.__shady.childNodes.push(n);\n          }\n        }\n        return this.__shady.childNodes;\n      } else {\n        return childNodes(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: generateSimpleDescriptor('firstChild'),\n\n  lastChild: generateSimpleDescriptor('lastChild'),\n\n  textContent: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        let tc = [];\n        for (let i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      } else {\n        return textContent(this);\n      }\n    },\n    set(text) {\n      if (this.nodeType !== Node.ELEMENT_NODE) {\n        // TODO(sorvell): can't do this if patch nodeValue.\n        this.nodeValue = text;\n      } else {\n        clearNode(this);\n        if (text) {\n          this.appendChild(document.createTextNode(text));\n        }\n      }\n    },\n    configurable: true\n  },\n\n  // fragment, element, document\n  firstElementChild: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        let n = this.firstChild;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.nextSibling;\n        }\n        return n;\n      } else {\n        return firstElementChild(this);\n      }\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get() {\n      if (hasProperty(this, 'lastChild')) {\n        let n = this.lastChild;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.previousSibling;\n        }\n        return n;\n      } else {\n        return lastElementChild(this);\n      }\n    },\n    configurable: true\n  },\n\n  children: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        return Array.prototype.filter.call(this.childNodes, function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      } else {\n        return children(this);\n      }\n    },\n    configurable: true\n  },\n\n  // element (HTMLElement on IE11)\n  innerHTML: {\n    get() {\n      let content = this.localName === 'template' ? this.content : this;\n      if (hasProperty(this, 'firstChild')) {\n        return getInnerHTML(content);\n      } else {\n        return innerHTML(content);\n      }\n    },\n    set(text) {\n      let content = this.localName === 'template' ? this.content : this;\n      clearNode(content);\n      let doc = domParser.parseFromString(text, 'text/html');\n      if (doc.head) {\n        insertDOMFrom(content, doc.head);\n      }\n      if (doc.body) {\n        insertDOMFrom(content, doc.body);\n      }\n    },\n    configurable: true\n  }\n\n};\n\n// Note: Can be patched on element prototype on all browsers.\n// Must be patched on instance on browsers that support native Shadow DOM\n// but do not have builtin accessors (old Chrome).\nlet ShadowRootAccessor = {\n  shadowRoot: {\n    get() {\n      return this.shadyRoot;\n    },\n    set(value) {\n      this.shadyRoot = value;\n    },\n    configurable: true\n  }\n};\n\n// Note: Can be patched on document prototype on browsers with builtin accessors.\n// Must be patched separately on simulated ShadowRoot.\n// Must be patched as `_activeElement` on browsers without builtin accessors.\nlet ActiveElementAccessor = {\n\n  activeElement: {\n    get() {\n      return activeElementForNode(this);\n    },\n    set() {},\n    configurable: true\n  }\n\n};\n\n// patch a group of descriptors on an object only if it exists or if the `force`\n// argument is true.\nfunction patchAccessorGroup(obj, descriptors, force) {\n  for (let p in descriptors) {\n    let objDesc = Object.getOwnPropertyDescriptor(obj, p);\n    if ((objDesc && objDesc.configurable) ||\n      (!objDesc && force)) {\n      Object.defineProperty(obj, p, descriptors[p]);\n    } else if (force) {\n      console.warn('Could not define', p, 'on', obj);\n    }\n  }\n}\n\n// patch dom accessors on proto where they exist\nfunction patchAccessors(proto) {\n  patchAccessorGroup(proto, OutsideAccessors);\n  patchAccessorGroup(proto, InsideAccessors);\n  patchAccessorGroup(proto, ActiveElementAccessor);\n}\n\n// ensure element descriptors (IE/Edge don't have em)\nfunction patchShadowRootAccessors(proto) {\n  patchAccessorGroup(proto, InsideAccessors, true);\n  patchAccessorGroup(proto, ActiveElementAccessor, true);\n}\n\n// ensure an element has patched \"outside\" accessors; no-op when not needed\nlet patchOutsideElementAccessors = settings.hasDescriptors ?\n  function() {} : function(element) {\n    if (!(element.__shady && element.__shady.__outsideAccessors)) {\n      element.__shady = element.__shady || {};\n      element.__shady.__outsideAccessors = true;\n      patchAccessorGroup(element, OutsideAccessors, true);\n    }\n  };\n\n// ensure an element has patched \"inside\" accessors; no-op when not needed\nlet patchInsideElementAccessors = settings.hasDescriptors ?\n  function() {} : function(element) {\n    if (!(element.__shady && element.__shady.__insideAccessors)) {\n      element.__shady = element.__shady || {};\n      element.__shady.__insideAccessors = true;\n      patchAccessorGroup(element, InsideAccessors, true);\n      patchAccessorGroup(element, ShadowRootAccessor, true);\n    }\n  };\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction recordInsertBefore(node, container, ref_node) {\n  patchInsideElementAccessors(container);\n  container.__shady = container.__shady || {};\n  if (hasProperty(container, 'firstChild')) {\n    container.__shady.childNodes = null;\n  }\n  // handle document fragments\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    let c$ = node.childNodes;\n    for (let i=0; i < c$.length; i++) {\n      linkNode(c$[i], container, ref_node);\n    }\n    // cleanup logical dom in doc fragment.\n    node.__shady = node.__shady || {};\n    let resetTo = hasProperty(node, 'firstChild') ? null : undefined;\n    node.__shady.firstChild = node.__shady.lastChild = resetTo;\n    node.__shady.childNodes = resetTo;\n  } else {\n    linkNode(node, container, ref_node);\n  }\n}\n\nfunction linkNode(node, container, ref_node) {\n  patchOutsideElementAccessors(node);\n  ref_node = ref_node || null;\n  node.__shady = node.__shady || {};\n  container.__shady = container.__shady || {};\n  if (ref_node) {\n    ref_node.__shady = ref_node.__shady || {};\n  }\n  // update ref_node.previousSibling <-> node\n  node.__shady.previousSibling = ref_node ? ref_node.__shady.previousSibling :\n    container.lastChild;\n  let ps = node.__shady.previousSibling;\n  if (ps && ps.__shady) {\n    ps.__shady.nextSibling = node;\n  }\n  // update node <-> ref_node\n  let ns = node.__shady.nextSibling = ref_node;\n  if (ns && ns.__shady) {\n    ns.__shady.previousSibling = node;\n  }\n  // update node <-> container\n  node.__shady.parentNode = container;\n  if (ref_node) {\n    if (ref_node === container.__shady.firstChild) {\n      container.__shady.firstChild = node;\n    }\n  } else {\n    container.__shady.lastChild = node;\n    if (!container.__shady.firstChild) {\n      container.__shady.firstChild = node;\n    }\n  }\n  // remove caching of childNodes\n  container.__shady.childNodes = null;\n}\n\nfunction recordRemoveChild(node, container) {\n  node.__shady = node.__shady || {};\n  container.__shady = container.__shady || {};\n  if (node === container.__shady.firstChild) {\n    container.__shady.firstChild = node.__shady.nextSibling;\n  }\n  if (node === container.__shady.lastChild) {\n    container.__shady.lastChild = node.__shady.previousSibling;\n  }\n  let p = node.__shady.previousSibling;\n  let n = node.__shady.nextSibling;\n  if (p) {\n    p.__shady = p.__shady || {};\n    p.__shady.nextSibling = n;\n  }\n  if (n) {\n    n.__shady = n.__shady || {};\n    n.__shady.previousSibling = p;\n  }\n  // When an element is removed, logical data is no longer tracked.\n  // Explicitly set `undefined` here to indicate this. This is disginguished\n  // from `null` which is set if info is null.\n  node.__shady.parentNode = node.__shady.previousSibling =\n    node.__shady.nextSibling = undefined;\n  if (hasProperty(container, 'childNodes')) {\n    // remove caching of childNodes\n    container.__shady.childNodes = null;\n  }\n}\n\nlet recordChildNodes = function(node) {\n  if (!hasProperty(node, 'firstChild')) {\n    node.__shady = node.__shady || {};\n    node.__shady.firstChild = firstChild(node);\n    node.__shady.lastChild = lastChild(node);\n    patchInsideElementAccessors(node);\n    let c$ = node.__shady.childNodes = childNodes(node);\n    for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n      n.__shady = n.__shady || {};\n      n.__shady.parentNode = node;\n      n.__shady.nextSibling = c$[i+1] || null;\n      n.__shady.previousSibling = c$[i-1] || null;\n      patchOutsideElementAccessors(n);\n    }\n  }\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Try to add node. Record logical info, track insertion points, perform\n// distribution iff needed. Return true if the add is handled.\nfunction addNode(container, node, ref_node) {\n  let ownerRoot = ownerShadyRootForNode(container);\n  let ipAdded;\n  if (ownerRoot) {\n    // optimization: special insertion point tracking\n    // TODO(sorvell): verify that the renderPending check here should not be needed.\n    if (node.__noInsertionPoint && !ownerRoot._changePending) {\n      ownerRoot._skipUpdateInsertionPoints = true;\n    }\n    // note: we always need to see if an insertion point is added\n    // since this saves logical tree info; however, invalidation state\n    // needs\n    ipAdded = _maybeAddInsertionPoint(node, container, ownerRoot);\n    // invalidate insertion points IFF not already invalid!\n    if (ipAdded) {\n      ownerRoot._skipUpdateInsertionPoints = false;\n    }\n  }\n  if (hasProperty(container, 'firstChild')) {\n    recordInsertBefore(node, container, ref_node);\n  }\n  // if not distributing and not adding to host, do a fast path addition\n  // TODO(sorvell): revisit flow since `ipAdded` needed here if\n  // node is a fragment that has a patched QSA.\n  let handled = _maybeDistribute(node, container, ownerRoot, ipAdded) ||\n    container.shadyRoot;\n  return handled;\n}\n\n// Try to remove node: update logical info and perform distribution iff\n// needed. Return true if the removal has been handled.\n// note that it's possible for both the node's host and its parent\n// to require distribution... both cases are handled here.\nfunction removeNode(node) {\n  // important that we want to do this only if the node has a logical parent\n  let logicalParent = hasProperty(node, 'parentNode') &&\n    getProperty(node, 'parentNode');\n  let distributed;\n  let ownerRoot = ownerShadyRootForNode(node);\n  if (logicalParent || ownerRoot) {\n    // distribute node's parent iff needed\n    distributed = maybeDistributeParent(node);\n    if (logicalParent) {\n      recordRemoveChild(node, logicalParent);\n    }\n    // remove node from root and distribute it iff needed\n    let removedDistributed = ownerRoot &&\n      _removeDistributedChildren(ownerRoot, node);\n    let addedInsertionPoint = (logicalParent && ownerRoot &&\n      logicalParent.localName === ownerRoot.getInsertionPointTag());\n    if (removedDistributed || addedInsertionPoint) {\n      ownerRoot._skipUpdateInsertionPoints = false;\n      updateRootViaContentChange(ownerRoot);\n    }\n  }\n  _removeOwnerShadyRoot(node);\n  return distributed;\n}\n\n\nfunction _scheduleObserver(node, addedNode, removedNode) {\n  let observer = node.__shady && node.__shady.observer;\n  if (observer) {\n    if (addedNode) {\n      observer.addedNodes.push(addedNode);\n    }\n    if (removedNode) {\n      observer.removedNodes.push(removedNode);\n    }\n    observer.schedule();\n  }\n}\n\nfunction removeNodeFromParent(node, parent) {\n  if (parent) {\n    _scheduleObserver(parent, null, node);\n    return removeNode(node);\n  } else {\n    _removeOwnerShadyRoot(node);\n  }\n}\n\nfunction _hasCachedOwnerRoot(node) {\n  return Boolean(node.__ownerShadyRoot !== undefined);\n}\n\nfunction getRootNode(node) {\n  if (!node || !node.nodeType) {\n    return;\n  }\n  let root = node.__ownerShadyRoot;\n  if (root === undefined) {\n    if (isShadyRoot(node)) {\n      root = node;\n    } else {\n      let parent = node.parentNode;\n      root = parent ? getRootNode(parent) : node;\n    }\n    // memo-ize result for performance but only memo-ize\n    // result if node is in the document. This avoids a problem where a root\n    // can be cached while an element is inside a fragment.\n    // If this happens and we cache the result, the value can become stale\n    // because for perf we avoid processing the subtree of added fragments.\n    if (document.documentElement.contains(node)) {\n      node.__ownerShadyRoot = root;\n    }\n  }\n  return root;\n}\n\nfunction _maybeDistribute(node, container, ownerRoot, ipAdded) {\n  // TODO(sorvell): technically we should check non-fragment nodes for\n  // <content> children but since this case is assumed to be exceedingly\n  // rare, we avoid the cost and will address with some specific api\n  // when the need arises.  For now, the user must call\n  // distributeContent(true), which updates insertion points manually\n  // and forces distribution.\n  let insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n  let fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n    !node.__noInsertionPoint &&\n    insertionPointTag && node.querySelector(insertionPointTag);\n  let wrappedContent = fragContent &&\n    (fragContent.parentNode.nodeType !==\n    Node.DOCUMENT_FRAGMENT_NODE);\n  let hasContent = fragContent || (node.localName === insertionPointTag);\n  // There are 3 possible cases where a distribution may need to occur:\n  // 1. <content> being inserted (the host of the shady root where\n  //    content is inserted needs distribution)\n  // 2. children being inserted into parent with a shady root (parent\n  //    needs distribution)\n  // 3. container is an insertionPoint\n  if (hasContent || (container.localName === insertionPointTag) || ipAdded) {\n    if (ownerRoot) {\n      // note, insertion point list update is handled after node\n      // mutations are complete\n      updateRootViaContentChange(ownerRoot);\n    }\n  }\n  let needsDist = _nodeNeedsDistribution(container);\n  if (needsDist) {\n    updateRootViaContentChange(container.shadyRoot);\n  }\n  // Return true when distribution will fully handle the composition\n  // Note that if a content was being inserted that was wrapped by a node,\n  // and the parent does not need distribution, return false to allow\n  // the nodes to be added directly, after which children may be\n  // distributed and composed into the wrapping node(s)\n  return needsDist || (hasContent && !wrappedContent);\n}\n\n/* note: parent argument is required since node may have an out\nof date parent at this point; returns true if a <content> is being added */\nfunction _maybeAddInsertionPoint(node, parent, root) {\n  let added;\n  let insertionPointTag = root.getInsertionPointTag();\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n    !node.__noInsertionPoint) {\n    let c$ = node.querySelectorAll(insertionPointTag);\n    for (let i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n      np = n.parentNode;\n      // don't allow node's parent to be fragment itself\n      if (np === node) {\n        np = parent;\n      }\n      na = _maybeAddInsertionPoint(n, np, root);\n      added = added || na;\n    }\n  } else if (node.localName === insertionPointTag) {\n    recordChildNodes(parent);\n    recordChildNodes(node);\n    added = true;\n  }\n  return added;\n}\n\nfunction _nodeNeedsDistribution(node) {\n  return node && node.shadyRoot &&\n    node.shadyRoot.hasInsertionPoint();\n}\n\nfunction _removeDistributedChildren(root, container) {\n  let hostNeedsDist;\n  let ip$ = root._insertionPoints;\n  for (let i=0; i<ip$.length; i++) {\n    let insertionPoint = ip$[i];\n    if (_contains(container, insertionPoint)) {\n      let dc$ = insertionPoint.assignedNodes({flatten: true});\n      for (let j=0; j<dc$.length; j++) {\n        hostNeedsDist = true;\n        let node = dc$[j];\n        let parent = parentNode(node);\n        if (parent) {\n          removeChild.call(parent, node);\n        }\n      }\n    }\n  }\n  return hostNeedsDist;\n}\n\nfunction _contains(container, node) {\n  while (node) {\n    if (node == container) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n}\n\nfunction _removeOwnerShadyRoot(node) {\n  // optimization: only reset the tree if node is actually in a root\n  if (_hasCachedOwnerRoot(node)) {\n    let c$ = node.childNodes;\n    for (let i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n      _removeOwnerShadyRoot(n);\n    }\n  }\n  node.__ownerShadyRoot = undefined;\n}\n\n// TODO(sorvell): This will fail if distribution that affects this\n// question is pending; this is expected to be exceedingly rare, but if\n// the issue comes up, we can force a flush in this case.\nfunction firstComposedNode(insertionPoint) {\n  let n$ = insertionPoint.assignedNodes({flatten: true});\n  let root = getRootNode(insertionPoint);\n  for (let i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n    // means that we're composed to this spot.\n    if (root.isFinalDestination(insertionPoint, n)) {\n      return n;\n    }\n  }\n}\n\nfunction maybeDistributeParent(node) {\n  let parent = node.parentNode;\n  if (_nodeNeedsDistribution(parent)) {\n    updateRootViaContentChange(parent.shadyRoot);\n    return true;\n  }\n}\n\nfunction updateRootViaContentChange(root) {\n  // mark root as mutation based on a mutation\n  root._changePending = true;\n  root.update();\n}\n\nfunction distributeAttributeChange(node, name) {\n  if (name === 'slot') {\n    maybeDistributeParent(node);\n  } else if (node.localName === 'slot' && name === 'name') {\n    let root = ownerShadyRootForNode(node);\n    if (root) {\n      root.update();\n    }\n  }\n}\n\n// NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n// but it's also generally useful to recurse through the element tree\n// and is used by Polymer's styling system.\nfunction query(node, matcher, halter) {\n  let list = [];\n  _queryElements(node.childNodes, matcher,\n    halter, list);\n  return list;\n}\n\nfunction _queryElements(elements, matcher, halter, list) {\n  for (let i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n    if (c.nodeType === Node.ELEMENT_NODE &&\n        _queryElement(c, matcher, halter, list)) {\n      return true;\n    }\n  }\n}\n\nfunction _queryElement(node, matcher, halter, list) {\n  let result = matcher(node);\n  if (result) {\n    list.push(node);\n  }\n  if (halter && halter(result)) {\n    return result;\n  }\n  _queryElements(node.childNodes, matcher,\n    halter, list);\n}\n\nfunction renderRootNode(element) {\n  var root = element.getRootNode();\n  if (isShadyRoot(root)) {\n    root.render();\n  }\n}\n\nfunction setAttribute$1(node, attr, value) {\n  // avoid scoping elements in non-main document to avoid template documents\n  if (window.ShadyCSS && attr === 'class' && node.ownerDocument === document) {\n    window.ShadyCSS.setElementClass(node, value);\n  } else {\n    setAttribute.call(node, attr, value);\n    distributeAttributeChange(node, attr);\n  }\n}\n\nfunction removeAttribute$1(node, attr) {\n  removeAttribute.call(node, attr);\n  distributeAttributeChange(node, attr);\n}\n\n// cases in which we may not be able to just do standard native call\n// 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n// has an insertion point)\n// 2. container is a shadyRoot (don't distribute, instead set\n// container to container.host.\n// 3. node is <content> (host of container needs distribution)\nfunction insertBefore$1(parent, node, ref_node) {\n  if (ref_node) {\n    let p = getProperty(ref_node, 'parentNode');\n    if (p !== undefined && p !== parent) {\n      throw Error('The ref_node to be inserted before is not a child ' +\n        'of this node');\n    }\n  }\n  // remove node from its current position iff it's in a tree.\n  if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n    let parent = getProperty(node, 'parentNode');\n    removeNodeFromParent(node, parent);\n  }\n  if (!addNode(parent, node, ref_node)) {\n    if (ref_node) {\n      // if ref_node is an insertion point replace with first distributed node\n      let root = ownerShadyRootForNode(ref_node);\n      if (root) {\n        ref_node = ref_node.localName === root.getInsertionPointTag() ?\n          firstComposedNode(ref_node) : ref_node;\n      }\n    }\n    // if adding to a shadyRoot, add to host instead\n    let container = isShadyRoot(parent) ?\n      parent.host : parent;\n    if (ref_node) {\n      insertBefore.call(container, node, ref_node);\n    } else {\n      appendChild.call(container, node);\n    }\n  }\n  _scheduleObserver(parent, node);\n  return node;\n}\n\n/**\n  Removes the given `node` from the element's `lightChildren`.\n  This method also performs dom composition.\n*/\nfunction removeChild$1(parent, node) {\n  if (node.parentNode !== parent) {\n    throw Error('The node to be removed is not a child of this node: ' +\n      node);\n  }\n  if (!removeNode(node)) {\n    // if removing from a shadyRoot, remove form host instead\n    let container = isShadyRoot(parent) ?\n      parent.host :\n      parent;\n    // not guaranteed to physically be in container; e.g.\n    // undistributed nodes.\n    let nativeParent = parentNode(node);\n    if (container === nativeParent) {\n      removeChild.call(container, node);\n    }\n  }\n  _scheduleObserver(parent, null, node);\n  return node;\n}\n\nfunction cloneNode$1(node, deep) {\n  if (node.localName == 'template') {\n    return cloneNode.call(node, deep);\n  } else {\n    let n = cloneNode.call(node, false);\n    if (deep) {\n      let c$ = node.childNodes;\n      for (let i=0, nc; i < c$.length; i++) {\n        nc = c$[i].cloneNode(true);\n        n.appendChild(nc);\n      }\n    }\n    return n;\n  }\n}\n\n// note: Though not technically correct, we fast path `importNode`\n// when called on a node not owned by the main document.\n// This allows, for example, elements that cannot\n// contain custom elements and are therefore not likely to contain shadowRoots\n// to cloned natively. This is a fairly significant performance win.\nfunction importNode$1(node, deep, nativeImportNode) {\n  if (!nativeImportNode) {\n    nativeImportNode = importNode;\n  }\n  if (node.ownerDocument !== document) {\n    return nativeImportNode.call(document, node, deep);\n  }\n  let n = nativeImportNode.call(document, node, false);\n  if (deep) {\n    let c$ = node.childNodes;\n    for (let i=0, nc; i < c$.length; i++) {\n      nc = importNode$1(c$[i], true, nativeImportNode);\n      n.appendChild(nc);\n    }\n  }\n  return n;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nlet alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  let composedPath = [];\n  let current = startNode;\n  let startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.nodeType === Node.DOCUMENT_FRAGMENT_NODE && current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  let refNodePath = pathComposer(refNode, true);\n  let p$ = path;\n  for (let i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nlet eventMixin = {\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  let klazz = function(type, options) {\n    let event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  };\n  // put constructor properties on subclass\n  mixin(klazz, Base);\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nlet nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  let hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (let i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  let path = e.composedPath();\n  let node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(e, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (let i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    // capture phase fires all capture handlers\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n\n  // set the event phase to `AT_TARGET` as in spec\n  Object.defineProperty(e, 'eventPhase', {value: Event.AT_TARGET});\n\n  // the event only needs to be fired when owner roots change when iterating the event path\n  // keep track of the last seen owner root\n  let lastFiredRoot;\n  for (let i = 0; i < path.length; i++) {\n    node = path[i];\n    if (i === 0 || (node.shadowRoot && node.shadowRoot === lastFiredRoot)) {\n      fireHandlers(e, node, 'bubble');\n      // don't bother with window, it doesn't have `getRootNode` and will be last in the path anyway\n      if (node !== window) {\n        lastFiredRoot = node.getRootNode();\n      }\n      if (e.__propagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction addEventListener$1(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n\n  // The callback `fn` might be used for multiple nodes/events. Since we generate\n  // a wrapper function, we need to keep track of it when we remove the listener.\n  // It's more efficient to store the node/type/options information as Array in\n  // `fn` itself rather than the node (we assume that the same callback is used\n  // for few nodes at most, whereas a node will likely have many event listeners).\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  let capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  if (fn.__eventWrappers) {\n    // Stop if the wrapper function has already been created.\n    for (let i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        return;\n      }\n    }\n  } else {\n    fn.__eventWrappers = [];\n  }\n\n  const wrapperFn = function(e) {\n    // Support `once` option.\n    if (once) {\n      this.removeEventListener(type, fn, optionsOrCapture);\n    }\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      patchPrototype(e, eventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  // Store the wrapper information.\n  fn.__eventWrappers.push({\n    node: this,\n    type: type,\n    capture: capture,\n    once: once,\n    passive: passive,\n    wrapperFn: wrapperFn\n  });\n\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    this.__handlers[type][capture ? 'capture' : 'bubble'].push(wrapperFn);\n  } else {\n    addEventListener.call(this, type, wrapperFn, optionsOrCapture);\n  }\n}\n\nfunction removeEventListener$1(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  let capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  // Search the wrapped function.\n  let wrapperFn = undefined;\n  if (fn.__eventWrappers) {\n    for (let i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        wrapperFn = fn.__eventWrappers.splice(i, 1)[0].wrapperFn;\n        // Cleanup.\n        if (!fn.__eventWrappers.length) {\n          fn.__eventWrappers = undefined;\n        }\n        break;\n      }\n    }\n  }\n\n  removeEventListener.call(this, type, wrapperFn || fn, optionsOrCapture);\n  if (wrapperFn && nonBubblingEventsToRetarget[type] &&\n      this.__handlers && this.__handlers[type]) {\n    const arr = this.__handlers[type][capture ? 'capture' : 'bubble'];\n    const idx = arr.indexOf(wrapperFn);\n    if (idx > -1) {\n      arr.splice(idx, 1);\n    }\n  }\n}\n\nfunction activateFocusEventOverrides() {\n  for (let ev in nonBubblingEventsToRetarget) {\n    window.addEventListener(ev, function(e) {\n      if (!e.__target) {\n        e.__target = e.target;\n        e.__relatedTarget = e.relatedTarget;\n        patchPrototype(e, eventMixin);\n        retargetNonBubblingEvent(e);\n        e.stopImmediatePropagation();\n      }\n    }, true);\n  }\n}\n\nlet PatchedEvent = mixinComposedFlag(window.Event);\nlet PatchedCustomEvent = mixinComposedFlag(window.CustomEvent);\nlet PatchedMouseEvent = mixinComposedFlag(window.MouseEvent);\n\nfunction patchEvents() {\n  window.Event = PatchedEvent;\n  window.CustomEvent = PatchedCustomEvent;\n  window.MouseEvent = PatchedMouseEvent;\n  activateFocusEventOverrides();\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nconst EDIT_LEAVE = 0;\nconst EDIT_UPDATE = 1;\nconst EDIT_ADD = 2;\nconst EDIT_DELETE = 3;\n\nlet ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    // \"Deletion\" columns\n    let rowCount = oldEnd - oldStart + 1;\n    let columnCount = currentEnd - currentStart + 1;\n    let distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (let i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (let j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (let i = 1; i < rowCount; i++) {\n      for (let j = 1; j < columnCount; j++) {\n        if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n          distances[i][j] = distances[i - 1][j - 1];\n        else {\n          let north = distances[i - 1][j] + 1;\n          let west = distances[i][j - 1] + 1;\n          distances[i][j] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances(distances) {\n    let i = distances.length - 1;\n    let j = distances[0].length - 1;\n    let current = distances[i][j];\n    let edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      let northWest = distances[i - 1][j - 1];\n      let west = distances[i - 1][j];\n      let north = distances[i][j - 1];\n\n      let min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    let prefixCount = 0;\n    let suffixCount = 0;\n    let splice;\n\n    let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    let ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    let splices = [];\n    let index = currentStart;\n    let oldIndex = oldStart;\n    for (let i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix(current, old, searchLength) {\n    for (let i = 0; i < searchLength; i++)\n      if (!this.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix(current, old, searchLength) {\n    let index1 = current.length;\n    let index2 = old.length;\n    let count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nlet calculateSplices = (current, previous) =>\n  ArraySplice.calculateSplices(current, previous);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// NOTE: normalize event contruction where necessary (IE11)\nlet NormalizedEvent = typeof Event === 'function' ? Event :\n  function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    return e;\n  };\n\nvar Distributor = class {\n\n  constructor(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  getInsertionPoints() {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  }\n\n  hasInsertionPoint() {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  }\n\n  isInsertionPoint(node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  }\n\n  distribute() {\n    if (this.hasInsertionPoint()) {\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  }\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  collectPool() {\n    let host = this.root.host;\n    let pool=[], i=0;\n    for (let n=host.firstChild; n; n=n.nextSibling) {\n      pool[i++] = n;\n    }\n    return pool;\n  }\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into storage\n  // array where applicable.\n  distributePool(node, pool) {\n    let dirtyRoots = [];\n    let p$ = this.root._insertionPoints;\n    for (let i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      let parent = p.parentNode;\n      if (parent && parent.shadyRoot &&\n          this.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    for (let i=0; i < pool.length; i++) {\n      let p = pool[i];\n      if (p) {\n        p.__shady = p.__shady || {};\n        p.__shady.assignedSlot = undefined;\n        // remove undistributed elements from physical dom.\n        let parent = parentNode(p);\n        if (parent) {\n          removeChild.call(parent, p);\n        }\n      }\n    }\n    return dirtyRoots;\n  }\n\n  distributeInsertionPoint(insertionPoint, pool) {\n    let prevAssignedNodes = insertionPoint.__shady.assignedNodes;\n    if (prevAssignedNodes) {\n      this.clearAssignedSlots(insertionPoint, true);\n    }\n    insertionPoint.__shady.assignedNodes = [];\n    let needsSlotChange = false;\n    // distribute nodes from the pool that this selector matches\n    let anyDistributed = false;\n    for (let i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this.matchesInsertionPoint(node, insertionPoint)) {\n        if (node.__shady._prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      let children$$1 = insertionPoint.childNodes;\n      for (let j = 0, node; j < children$$1.length; j++) {\n        node = children$$1[j];\n        if (node.__shady._prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n      }\n    }\n    // we're already dirty if a node was newly added to the slot\n    // and we're also dirty if the assigned count decreased.\n    if (prevAssignedNodes) {\n      // TODO(sorvell): the tracking of previously assigned slots\n      // could instead by done with a Set and then we could\n      // avoid needing to iterate here to clear the info.\n      for (let i=0; i < prevAssignedNodes.length; i++) {\n        prevAssignedNodes[i].__shady._prevAssignedSlot = null;\n      }\n      if (insertionPoint.__shady.assignedNodes.length < prevAssignedNodes.length) {\n        needsSlotChange = true;\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n    if (needsSlotChange) {\n      this._fireSlotChange(insertionPoint);\n    }\n  }\n\n  clearAssignedSlots(slot, savePrevious) {\n    let n$ = slot.__shady.assignedNodes;\n    if (n$) {\n      for (let i=0; i < n$.length; i++) {\n        let n = n$[i];\n        if (savePrevious) {\n          n.__shady._prevAssignedSlot = n.__shady.assignedSlot;\n        }\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n.__shady.assignedSlot === slot) {\n          n.__shady.assignedSlot = null;\n        }\n      }\n    }\n  }\n\n  matchesInsertionPoint(node, insertionPoint) {\n    let slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    let slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  }\n\n  distributeNodeInto(child, insertionPoint) {\n    insertionPoint.__shady.assignedNodes.push(child);\n    child.__shady.assignedSlot = insertionPoint;\n  }\n\n  setDistributedNodesOnInsertionPoint(insertionPoint) {\n    let n$ = insertionPoint.__shady.assignedNodes;\n    insertionPoint.__shady.distributedNodes = [];\n    for (let i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this.isInsertionPoint(n)) {\n        let d$ = n.__shady.distributedNodes;\n        if (d$) {\n          for (let j=0; j < d$.length; j++) {\n            insertionPoint.__shady.distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint.__shady.distributedNodes.push(n$[i]);\n      }\n    }\n  }\n\n  _fireSlotChange(insertionPoint) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    insertionPoint.dispatchEvent(new NormalizedEvent('slotchange'));\n    if (insertionPoint.__shady.assignedSlot) {\n      this._fireSlotChange(insertionPoint.__shady.assignedSlot);\n    }\n  }\n\n  isFinalDestination(insertionPoint) {\n    return !(insertionPoint.__shady.assignedSlot);\n  }\n\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nfunction attachShadow(host, options) {\n  if (!host) {\n    throw 'Must provide a host.';\n  }\n  if (!options) {\n    throw 'Not enough arguments.'\n  }\n  // NOTE: this strange construction is necessary because\n  // DocumentFragment cannot be subclassed on older browsers.\n  let shadowRoot = document.createDocumentFragment();\n  shadowRoot.__proto__ = ShadyRootPrototype;\n  shadowRoot._init(host);\n  return shadowRoot;\n}\n\nlet ShadyRootPrototype = Object.create(DocumentFragment.prototype);\nextendAll(ShadyRootPrototype, {\n\n  _init(host) {\n    // NOTE: set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // logical dom setup\n    recordChildNodes(host);\n    recordChildNodes(this);\n    // root <=> host\n    host.shadowRoot = this;\n    this.host = host;\n    // state flags\n    this._renderPending = false;\n    this._hasRendered = false;\n    this._changePending = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render\n  update() {\n    if (!this._renderPending) {\n      this._renderPending = true;\n      enqueue(() => this.render());\n    }\n  },\n\n  // returns the oldest renderPending ancestor root.\n  _getRenderRoot() {\n    let renderRoot = this;\n    let root = this;\n    while (root) {\n      if (root._renderPending) {\n        renderRoot = root;\n      }\n      root = root._rendererForHost();\n    }\n    return renderRoot;\n  },\n\n  // Returns the shadyRoot `this.host` if `this.host`\n  // has children that require distribution.\n  _rendererForHost() {\n    let root = this.host.getRootNode();\n    if (isShadyRoot(root)) {\n      let c$ = this.host.childNodes;\n      for (let i=0, c; i < c$.length; i++) {\n        c = c$[i];\n        if (this._distributor.isInsertionPoint(c)) {\n          return root;\n        }\n      }\n    }\n  },\n\n  render() {\n    if (this._renderPending) {\n      this._getRenderRoot()._render();\n    }\n  },\n\n  _render() {\n    this._renderPending = false;\n    this._changePending = false;\n    if (!this._skipUpdateInsertionPoints) {\n      this.updateInsertionPoints();\n    } else if (!this._hasRendered) {\n      this._insertionPoints = [];\n    }\n    this._skipUpdateInsertionPoints = false;\n    // TODO(sorvell): can add a first render optimization here\n    // to use if there are no insertion points\n    // 1. clear host node of composed children\n    // 2. appendChild the shadowRoot itself or (more robust) its logical children\n    // NOTE: this didn't seem worth it in perf testing\n    // but not ready to delete this info.\n    // logical\n    this.distribute();\n    // physical\n    this.compose();\n    this._hasRendered = true;\n  },\n\n  forceRender() {\n    this._renderPending = true;\n    this.render();\n  },\n\n  distribute() {\n    let dirtyRoots = this._distributor.distribute();\n    for (let i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i]._render();\n    }\n  },\n\n  updateInsertionPoints() {\n    let i$ = this.__insertionPoints;\n    // if any insertion points have been removed, clear their distribution info\n    if (i$) {\n      for (let i=0, c; i < i$.length; i++) {\n        c = i$[i];\n        if (c.getRootNode() !== this) {\n          this._distributor.clearAssignedSlots(c);\n        }\n      }\n    }\n    i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (let i=0, c; i < i$.length; i++) {\n      c = i$[i];\n      c.__shady = c.__shady || {};\n      recordChildNodes(c);\n      recordChildNodes(c.parentNode);\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree() {\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    let p$ = this._insertionPoints || [];\n    for (let i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = p.parentNode;\n      if ((parent !== this.host) && (parent !== this)) {\n        this._updateChildNodes(parent, this._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode(node) {\n    let children$$1 = [];\n    let c$ = (node.shadyRoot || node).childNodes;\n    for (let i = 0; i < c$.length; i++) {\n      let child = c$[i];\n      if (this._distributor.isInsertionPoint(child)) {\n        let distributedNodes = child.__shady.distributedNodes ||\n          (child.__shady.distributedNodes = []);\n        for (let j = 0; j < distributedNodes.length; j++) {\n          let distributedNode = distributedNodes[j];\n          if (this.isFinalDestination(child, distributedNode)) {\n            children$$1.push(distributedNode);\n          }\n        }\n      } else {\n        children$$1.push(child);\n      }\n    }\n    return children$$1;\n  },\n\n  isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes(container, children$$1) {\n    let composed = childNodes(container);\n    let splices = calculateSplices(children$$1, composed);\n    // process removals\n    for (let i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (parentNode(n) === container) {\n          removeChild.call(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (let i=0, s, next; (i<splices.length) && (s=splices[i]); i++) { //eslint-disable-line no-redeclare\n      next = composed[s.index];\n      for (let j=s.index, n; j < s.index + s.addedCount; j++) {\n        n = children$$1[j];\n        insertBefore.call(container, n, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j, 0, n);\n      }\n    }\n  },\n\n  getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n});\n\npatchShadowRootAccessors(ShadyRootPrototype);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction getAssignedSlot(node) {\n  renderRootNode(node);\n  return getProperty(node, 'assignedSlot') || null;\n}\n\nlet nodeMixin = {\n\n  addEventListener: addEventListener$1,\n\n  removeEventListener: removeEventListener$1,\n\n  appendChild(node) {\n    return insertBefore$1(this, node);\n  },\n\n  insertBefore(node, ref_node) {\n    return insertBefore$1(this, node, ref_node);\n  },\n\n  removeChild(node) {\n    return removeChild$1(this, node);\n  },\n\n  replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  cloneNode(deep) {\n    return cloneNode$1(this, deep);\n  },\n\n  getRootNode(options) {\n    return getRootNode(this, options);\n  },\n\n  get isConnected() {\n    return document.documentElement.contains(this)\n  }\n\n};\n\n// NOTE: For some reason `Text` redefines `assignedSlot`\nlet textMixin = {\n  get assignedSlot() {\n    return getAssignedSlot(this);\n  }\n};\n\nlet fragmentMixin = {\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector(selector) {\n    // match selector and halt on first result.\n    let result = query(this, function(n) {\n      return matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll(selector) {\n    return query(this, function(n) {\n      return matchesSelector(n, selector);\n    });\n  }\n\n};\n\nlet slotMixin = {\n\n  assignedNodes(options) {\n    if (this.localName === 'slot') {\n      renderRootNode(this);\n      return this.__shady ?\n        ((options && options.flatten ? this.__shady.distributedNodes :\n        this.__shady.assignedNodes) || []) :\n        [];\n    }\n  }\n\n};\n\nlet elementMixin = extendAll({\n\n  setAttribute(name, value) {\n    setAttribute$1(this, name, value);\n  },\n\n  removeAttribute(name) {\n    removeAttribute$1(this, name);\n  },\n\n  attachShadow(options) {\n    return attachShadow(this, options);\n  },\n\n  get slot() {\n    return this.getAttribute('slot');\n  },\n\n  set slot(value) {\n    this.setAttribute('slot', value);\n  },\n\n  get assignedSlot() {\n    return getAssignedSlot(this);\n  }\n\n}, fragmentMixin, slotMixin);\n\nObject.defineProperties(elementMixin, ShadowRootAccessor);\n\nlet documentMixin = extendAll({\n\n}, fragmentMixin);\n\nObject.defineProperties(documentMixin, {\n  _activeElement: ActiveElementAccessor.activeElement\n});\n\nfunction patchBuiltin(proto, obj) {\n  let n$ = Object.getOwnPropertyNames(obj);\n  for (let i=0; i < n$.length; i++) {\n    let n = n$[i];\n    let d = Object.getOwnPropertyDescriptor(obj, n);\n    // NOTE: we prefer writing directly here because some browsers\n    // have descriptors that are writable but not configurable (e.g.\n    // `appendChild` on older browsers)\n    if (d.value) {\n      proto[n] = d.value;\n    } else {\n      Object.defineProperty(proto, n, d);\n    }\n  }\n}\n\n\n// Apply patches to builtins (e.g. Element.prototype). Some of these patches\n// can be done unconditionally (mostly methods like\n// `Element.prototype.appendChild`) and some can only be done when the browser\n// has proper descriptors on the builtin prototype\n// (e.g. `Element.prototype.firstChild`)`. When descriptors are not available,\n// elements are individually patched when needed (see e.g.\n// `patchInside/OutsideElementAccessors` in `patch-accessors.js`).\nfunction patchBuiltins() {\n  // These patches can always be done, for all supported browsers.\n  patchBuiltin(window.Node.prototype, nodeMixin);\n  patchBuiltin(window.Text.prototype, textMixin);\n  patchBuiltin(window.DocumentFragment.prototype, fragmentMixin);\n  patchBuiltin(window.Element.prototype, elementMixin);\n  patchBuiltin(window.Document.prototype, documentMixin);\n  // patch this only on the instance because (1) main document is only\n  // one we care about; (2) better compatibility with other polyfills\n  // that may also patch the instance (e.g. CE)\n  let previousImportNode = document.importNode;\n  document.importNode = function(node, deep) {\n    return importNode$1(node, deep, previousImportNode);\n  };\n  if (window.HTMLSlotElement) {\n    patchBuiltin(window.HTMLSlotElement.prototype, slotMixin);\n  }\n  // These patches can *only* be done\n  // on browsers that have proper property descriptors on builtin prototypes.\n  // This includes: IE11, Edge, Chrome >= 4?; Safari >= 10, Firefox\n  // On older browsers (Chrome <= 4?, Safari 9), a per element patching\n  // strategy is used for patching accessors.\n  if (settings.hasDescriptors) {\n    patchAccessors(window.Node.prototype);\n    patchAccessors(window.Text.prototype);\n    patchAccessors(window.DocumentFragment.prototype);\n    patchAccessors(window.Element.prototype);\n    let nativeHTMLElement =\n      (window.customElements && customElements.nativeHTMLElement) ||\n      HTMLElement;\n    patchAccessors(nativeHTMLElement.prototype);\n    patchAccessors(window.Document.prototype);\n    if (window.HTMLSlotElement) {\n      patchAccessors(window.HTMLSlotElement.prototype);\n    }\n  }\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nif (settings.inUse) {\n\n  window.ShadyDOM = {\n    // TODO(sorvell): remove when Polymer does not depend on this.\n    inUse: settings.inUse,\n    // TODO(sorvell): remove when Polymer does not depend on this.\n    patch: function(node) { return node; },\n    isShadyRoot: isShadyRoot,\n    enqueue: enqueue,\n    flush: flush,\n    settings: settings,\n    filterMutations: filterMutations,\n    observeChildren: observeChildren,\n    unobserveChildren: unobserveChildren,\n    nativeMethods: nativeMethods,\n    nativeTree: nativeTree\n  };\n\n  // Apply patches to events...\n  patchEvents();\n  // Apply patches to builtins (e.g. Element.prototype) where applicable.\n  patchBuiltins();\n\n}\n\n}());\n"]}